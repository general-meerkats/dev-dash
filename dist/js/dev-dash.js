"use strict";var HitApi=function(e){function t(){i.$inputForm=e("#input-form")}function n(){i.$inputForm.submit(r)}function a(e){return{type:e.type,date:e.created_at,actor:e.actor.display_login,avatar:e.actor.avatar_url,payload:e.payload}}function r(t,n){var a="https://api.github.com/repos",r=a+"/"+t+"/"+n+"/events";e.getJSON(r).then(o)}function o(e){var t=["PushEvent","CommitCommentEvent"],n=["IssuesEvent","IssueCommentEvent","ProjectEvent","ProjectCardEvent","ProjectColumnEvent"],r=["CreateEvent","PullRequestEvent","PullRequestReviewEvent","PullRequestReviewCommentEvent"],o=l(e,t),p=l(e,n),i=l(e,r);RenderTable.render(o,p,i),RenderChart.render(e.map(a))}function l(e,t){return e.filter(function(e){return t.indexOf(e.type)!==-1}).map(a)}function p(){t(),n()}var i={};return{init:p,getEvents:r}}(jQuery),Greet=function(e){function t(){m.$greeting=e(".greeting"),m.$overlay=e('<div id="overlay"></div>'),m.$modalPrompt=e(document.createElement("div")),m.$modalError=e(document.createElement("p")),m.$modalPrompt.attr("id","user-modal").addClass("user-modal").html(f),m.$modalError.addClass("user-modal-error").html("GitHub Username Not Found"),e("body").append(m.$modalPrompt)}function n(){e("#user-modal-form").submit(a)}function a(e){e.preventDefault(),s=e.currentTarget[0].value.trim(),c=e.currentTarget[1].value.trim(),r(c).then(function(t){t.login===c&&(LS.setData("dev-dash-user",{name:e.currentTarget[0].value,githubName:e.currentTarget[1].value}),p(),u())}).catch(function(e){m.$modalPrompt.append(m.$modalError)})}function r(t){return e.getJSON("https://api.github.com/users/"+t)}function o(){var e,t=new Date,n=t.getHours();return e=n<12?"morning":n>=12&&n<17?"afternoon":"evening","Good "+e+", "+s+"."}function l(){m.$overlay.show(),m.$modalPrompt.addClass("user-modal-show")}function p(){m.$overlay.hide(),m.$modalPrompt.removeClass("user-modal-show")}function i(){var e=LS.getData("dev-dash-user");e&&e.name?(s=e.name,c=e.githubName,u()):l()}function u(){m.$greeting.text(o()),RepoSelect.getRepos(c)}function d(){t(),m.$overlay.hide(),e("body").append(m.$overlay),n(),i()}var s,c,m={},f='<form id="user-modal-form" class="Grid Grid--gutters Grid--full" action="submit">\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">Your Name:</span>\n                      <input id="user-modal-name" class="InputAddOn-field" type="text" required>\n                    </div>\n                    <div class="Grid-cell InputAddOn">\n                      <span class="InputAddOn-item">GitHub User Name:</span>\n                      <input id="user-modal-username"  class="InputAddOn-field" type="text" required>\n                    </div>\n                      <div class="Grid-cell InputAddOn">\n                      <button class="InputAddOn-item" id="user-modal-button">Go!</button>\n                    </div>\n                    </form>';return{init:d}}(jQuery),LS=function(){function e(e,t){r&&r.setItem(e,JSON.stringify(t))}function t(e){if(r)return JSON.parse(r.getItem(e))}function n(){if(r)return r.clear()}function a(e){if(r)return r.removeItem(e)}var r=function(){var e,t,n=(new Date).toString();try{return e=window.localStorage,e.setItem(n,n),t=e.getItem(n)===n,e.removeItem(n),t&&e}catch(e){console.log("Problemz!")}}();return{setData:e,getData:t,deleteData:a,clearData:n}}(),RenderTable=function(e){function t(){c.$tableContainer=e(".table-container")}function n(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function a(e,t,n){c.$tableContainer.empty(),e.length>0&&i(e),t.length>0&&u(t),n.length>0&&d(n)}function r(){return{$listItem:e(document.createElement("li")),$img:e(document.createElement("img")),$paragraph:e(document.createElement("p")),$paraSpan:e(document.createElement("span")),$a:e(document.createElement("a"))}}function o(t,n){return e(document.createElement("a")).attr("target","_blank").attr("href",t).html('<span class="bolder">'+n+"</span>")}function l(t,n,a){return e(document.createElement("div")).addClass("table-col").append("<h3>"+t+" "+n+"</h3>").append(a)}function p(e){var t=[];return e.forEach(function(e){"PushEvent"===e.type?e.payload.commits.forEach(function(n){t.push({actor:e.actor,avatar:e.avatar,date:e.date,message:n.message,sha:n.sha,type:"commit",url:n.url})}):t.push(e)}),t}function i(t){var a=p(t),i="Commit-Related Events",u=e(document.createElement("ul"));a.forEach(function(e){var t,a,l=r();"commit"===e.type?(t=e.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/commits/,"commit"),a=e.sha.slice(0,6),l.$img.attr("src",e.avatar).appendTo(l.$listItem),l.$paraSpan.text('"'+e.message+'"'),l.$paragraph.append('<span class="bolder">'+e.actor+"</span> committed ")):(t=e.payload.comment.html_url,a=e.payload.comment.commit_id.slice(0,6),l.$img.attr("src",e.avatar).appendTo(l.$listItem),l.$paraSpan.text('"'+e.payload.comment.body+'"'),l.$paragraph.append('<span class="bolder">'+e.actor+"</span> commented on ")),l.$paragraph.append(o(t,a)).append(" on "+n(e.date)+": ").append(l.$paraSpan).appendTo(l.$listItem),l.$listItem.appendTo(u)}),u.addClass("col-list"),c.$tableContainer.append(l(a.length,i,u))}function u(t){var a="Todo-Related Events",p=e(document.createElement("ul"));t.forEach(function(e){var t,a,l=r();l.$img.attr("src",e.avatar).appendTo(l.$listItem),"IssuesEvent"===e.type?(t=e.payload.issue.html_url,a="Issue "+e.payload.issue.number,l.$paragraph.append('<span class="bolder">'+e.actor+"</span> "+e.payload.action+" ").append(o(t,a)).append(" on "+n(e.date)+': "'+e.payload.issue.title+'"')):"IssueCommentEvent"===e.type&&(t=e.payload.comment.html_url,a="Issue "+e.payload.issue.number,l.$paragraph.append('<span class="bolder">'+e.actor+"</span> commented on ").append(o(t,a)).append(" on "+n(e.date)+': "'+e.payload.comment.body+'"')),l.$listItem.append(l.$paragraph).appendTo(p)}),p.addClass("col-list"),c.$tableContainer.append(l(t.length,a,p))}function d(t){var a="Merge-Related Events",p=e(document.createElement("ul"));t.forEach(function(e){var t,a,l=r();l.$img.attr("src",e.avatar),"CreateEvent"===e.type?l.$paragraph.append(['<span class="bolder">'+e.actor+"</span> created",e.payload.ref_type,'<span class="bolder">'+e.payload.ref+"</span> on",n(e.date)].join(" ")):"PullRequestEvent"===e.type?(t=e.payload.pull_request.url.replace(/\/\/api./,"//").replace(/\/repos\//,"/").replace(/pulls/,"pull"),a="Pull Request "+e.payload.pull_request.number,l.$paragraph.append('<span class="bolder">'+e.actor+"</span>").append(" "+e.payload.action+" ").append(o(t,a)).append(" on "+n(e.date))):"PullRequestReviewEvent"===e.type?(t=e.payload.pull_request.html_url,a=e.payload.pull_request.title,l.$paragraph.append([e.actor,e.payload.action,"review of "].join(" ")).append(o(t,a)).append(" on"+n(e.date))):"PullRequestReviewCommentEvent"===e.type&&(t=e.payload.comment.html_url,a=e.payload.comment.body,l.$paragraph.append(['<span class="bolder">'+e.actor+"</span>",e.payload.action,"pull request comment "].join(" ")).append(o(t,a)).append(" on"+n(e.date))),l.$listItem.append(l.$img).append(l.$paragraph).appendTo(p)}),p.addClass("col-list"),c.$tableContainer.append(l(t.length,a,p))}function s(){t()}var c={};return{init:s,render:a}}(jQuery),RenderChart=function(e){function t(){m.$container=e(".chart-container"),m.$svgElem=e(document.createElementNS(f,"svg"))}function n(e){return new Date(e).toDateString().slice(0,15).replace(/ 0/g," ")}function a(e){for(var t=e.map(function(e){return n(e.date)}),a=new Date(t[0]),r=new Date(t[t.length-1]),o=[],l=a;l<=r;)o.push(n(l)),l=l.addDays(1);return o}function r(e){var t,n;return t=e.reduce(function(e,t){return Math.max(e,t[1])},e[0][1]),n=Math.floor(t/4),4*(n+1)}function o(e){var t,r,o=[],l=[];return e.forEach(function(e){"PushEvent"===e.type?e.payload.commits.forEach(function(t){o.push({actor:e.actor,avatar:e.avatar,date:e.date,payload:t,type:"Commit"})}):o.push(e)}),t=o.sort(function(e,t){return new Date(e.date)-new Date(t.date)}),r=a(t),l=r.map(function(e){return[e.slice(3,10),t.filter(function(t){return n(t.date)===e}).length]})}function l(e){return 1===e.length}function p(e,t,n){return e.map(function(e,a){return[a*t+v,h-e[1]*n-$]})}function i(t){var n=e(document.createElementNS(f,"g")),a=t.length-1,o=r(t),l=(g-v-y)/a,i=(h-$-y)/o,u=p(t,l,i);return u.forEach(function(a,r){var o=e(document.createElementNS(f,"circle")),l=e(document.createElementNS(f,"title")),p=a[0],i=a[1],u=4;o.attr("cx",p).attr("cy",i).attr("r",u),l.text(t[r][0]+" ("+t[r][1]+" events)"),o.append(l),n.addClass("chart-circle").append(o)}),n}function u(t){var n,a,o=e(document.createElementNS(f,"g")),l=t.length-1,i=r(t),u=(g-v-y)/l,d=(h-$-y)/i,s=p(t,u,d);for(n=0;n<s.length-1;n+=1)a=e(document.createElementNS(f,"line")),a.attr("x1",s[n][0]).attr("y1",s[n][1]).attr("x2",s[n+1][0]).attr("y2",s[n+1][1]),o.addClass("chart-line").append(a);return o}function d(t,n){var a,o,l,p,i,u,d,s,c,m,E=e(document.createElementNS(f,"g")),b=r(t);if("y"===n){for(E.addClass("labels y-labels"),l=b>12?b/4:b,c=(h-$-y)/l,m=0;m<l+1;m+=1)s=m*b/l,d=h-$-c*m,a=e(document.createElementNS(f,"line")),a.addClass("horiz-rule").attr("x1",v).attr("y1",d).attr("x2",g-y+5).attr("y2",d),o=e(document.createElementNS(f,"text")),o.attr("x",v-20).attr("y",d+4).html(s),E.append(a).append(o);return E}if("x"===n||!n||null===n){for(E.addClass("labels x-labels"),l=t.length-1,u=(g-v-y)/l,m=0;m<t.length;m+=1)o=e(document.createElementNS(f,"text")),i=t[m][0],p=m*u,o.attr("x",p+v).attr("y",h-5).text(i),t.length>20?0!==m&&m%10!==0&&m!==t.length-1||o.appendTo(E):o.appendTo(E);return E}}function s(e){var t;if(m.$svgElem.empty(),m.$svgElem.addClass("chart--content").attr("id","svg").attr("xmlns",f).attr("height","100%").attr("viewBox","0 0 "+g+" "+h).attr("xml:space","preserve"),e.length>0){if(t=o(e),l(t))return;m.$svgElem.append(d(t,"y")).append(d(t,"x")),m.$svgElem.append(u(t)),m.$svgElem.append(i(t)),m.$container.append(m.$svgElem)}}function c(){t()}var m={},f="http://www.w3.org/2000/svg",g=1e3,h=400,v=80,$=40,y=40;return Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t},{init:c,render:s}}(jQuery),RepoSelect=function(e){function t(){f.$selectContainer=e(".repo-select"),f.$p=e(document.createElement("p")),f.$listContainer=e(document.createElement("div")),f.$ul=e(document.createElement("ul")),f.$newRepoForm=e(document.createElement("form")),f.$newRepoUser=e(document.createElement("input")),f.$newRepoRepo=e(document.createElement("input")),f.$newRepoBtn=e(document.createElement("button"))}function n(){f.$selectContainer.on("click",".repo-select-highlight",a),f.$ul.on("click","div.li-descriptions",r),f.$ul.on("click","span.li-remove",o),f.$newRepoForm.on("submit",l)}function a(e){e.stopPropagation(),f.$listContainer.toggleClass("hidden")}function r(e){e.stopPropagation();var t=e.currentTarget.children[0].innerHTML.split(" / ");m=t[1],u(g),HitApi.getEvents(t[0],t[1]),f.$listContainer.addClass("hidden")}function o(t){t.stopPropagation();var n=(t.target.previousElementSibling.dataset.repo,e(t.target).parent()),a=n.attr("id");g.splice(a,1),n.remove(),LS.setData("dev-dash-repos",g)}function l(t){t.preventDefault(),t.stopPropagation();var n="https://api.github.com/repos",a=t.currentTarget[0].value,r=t.currentTarget[1].value;e.getJSON(n+"/"+a+"/"+r).then(function(e){return g.unshift(e),f.$newRepoUser[0].value="",f.$newRepoRepo[0].value="",g}).then(i).then(u).catch(function(e){console.warn("Error fetching repo.")})}function p(e){if(e&&e.length){e.forEach(function(e){g.push(e)});var t=g[0].full_name.split("/");return m=t[1],HitApi.getEvents(t[0],t[1]),e}}function i(e){return LS.setData("dev-dash-repos",g),e}function u(t){t&&t.length?(f.$ul.html(""),t.forEach(function(t,n){var a=e(document.createElement("li"));a.attr("id",n).html('<div class="li-descriptions" data-repo="'+t.name+'">\n                             <p>'+t.owner.login+" / "+t.name+"</p>\n                             <p>"+t.description+'</p>\n                           </div>\n                           <span class="li-remove">&#10060</span>'),f.$ul.append(a)}),d()):(console.log("no repos, holmes"),d(),f.$listContainer.removeClass("hidden"))}function d(){f.$newRepoBtn.html("+"),f.$newRepoUser.attr("required","true").attr("placeholder","author"),f.$newRepoRepo.attr("required","true").attr("placeholder","repo"),f.$newRepoForm.addClass("new-repo-form").append(f.$newRepoUser).append(f.$newRepoRepo).append(f.$newRepoBtn),f.$listContainer.addClass("repo-list").append(f.$ul).append(f.$newRepoForm),f.$p.html('You are currently viewing the <span class="repo-select-highlight">'+m+"&#x25BC;</span> repository."),f.$selectContainer.append(f.$p).append(f.$listContainer)}function s(t){h?(p(LS.getData("dev-dash-repos")),u(g)):e.getJSON("https://api.github.com/users/"+t+"/repos?sort=updated").then(function(e){return e.slice(0,3)}).then(p).then(i).then(u)}function c(){t(),n(),f.$listContainer.addClass("hidden")}var m,f={},g=[],h=function(){return!!LS.getData("dev-dash-repos")}();return{init:c,getRepos:s}}(jQuery),Backgrounds=function(e){function t(){p.$body=e("body")}function n(){return(new Date).toDateString().slice(4,15)}function a(){var e=LS.getData("dev-dash-bg"),t=Math.floor(Math.random()*i.length),a={imgName:i[t],date:n()};return e?e:a}function r(){var e,t,n=i.indexOf(d.imgName);new Date(u)>new Date(d.date)?(e=7===n?0:n+1,t=i[e],LS.setData("dev-dash-bg",{imgName:t,date:u}),o(t)):(o(d.imgName),LS.setData("dev-dash-bg",{imgName:d.imgName,date:u}))}function o(e){p.$body.css("background-image","url(dist/assets/"+e+".jpg)")}function l(){t(),r()}var p={},i=["001","002","003","004","005","006","007","008"],u=n(),d=a();return{init:l}}(jQuery);$(document).ready(function(){Backgrounds.init(),RepoSelect.init(),Greet.init(),HitApi.init(),RenderTable.init(),RenderChart.init()});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdldC1ldmVudHMuanMiLCJncmVldC5qcyIsImxvY2FsX3N0b3JhZ2UuanMiLCJyZW5kZXItdGFibGUuanMiLCJyZW5kZXItY2hhcnQuanMiLCJyZXBvLXNlbGVjdC5qcyIsImJhY2tncm91bmRzLmpzIiwiYXBwLmpzIl0sIm5hbWVzIjpbIkhpdEFwaSIsIiQiLCJjYWNoZURvbSIsIkRPTSIsIiRpbnB1dEZvcm0iLCJiaW5kRXZlbnRzIiwic3VibWl0IiwiZ2V0RXZlbnRzIiwicHJlcGFyZUV2ZW50cyIsImUiLCJ0eXBlIiwiZGF0ZSIsImNyZWF0ZWRfYXQiLCJhY3RvciIsImRpc3BsYXlfbG9naW4iLCJhdmF0YXIiLCJhdmF0YXJfdXJsIiwicGF5bG9hZCIsImF1dGhvciIsInJlcG8iLCJ1cmwiLCJyZXBvRXZlbnRzIiwiZ2V0SlNPTiIsInRoZW4iLCJoYW5kbGVSZXNwb25zZSIsInJlc3BvbnNlIiwiY29tbWl0VHlwZXMiLCJ0b2RvVHlwZXMiLCJtZXJnZVR5cGVzIiwiY29tbWl0RXZlbnRzIiwiZmlsdGVyUmVzIiwidG9kb0V2ZW50cyIsIm1lcmdlRXZlbnRzIiwiUmVuZGVyVGFibGUiLCJyZW5kZXIiLCJSZW5kZXJDaGFydCIsIm1hcCIsInJlcyIsInR5cGVzIiwiZmlsdGVyIiwiaW5kZXhPZiIsImluaXQiLCJqUXVlcnkiLCJHcmVldCIsIiRncmVldGluZyIsIiRvdmVybGF5IiwiJG1vZGFsUHJvbXB0IiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiJG1vZGFsRXJyb3IiLCJhdHRyIiwiYWRkQ2xhc3MiLCJodG1sIiwibW9kYWxGb3JtIiwiYXBwZW5kIiwiaGFuZGxlU3VibWl0IiwicHJldmVudERlZmF1bHQiLCJuYW1lIiwiY3VycmVudFRhcmdldCIsInZhbHVlIiwidHJpbSIsImdpdGh1Yk5hbWUiLCJjaGVja1VzZXIiLCJsb2dpbiIsIkxTIiwic2V0RGF0YSIsImhpZGVNb2RhbCIsImRpc3BsYXlNZXNzYWdlIiwiY2F0Y2giLCJlcnIiLCJ1IiwibWFrZU1lc3NhZ2UiLCJ0aW1lT2ZEYXkiLCJ0ZWhEYXRlIiwiRGF0ZSIsImluaXRpYWxIb3VyIiwiZ2V0SG91cnMiLCJzaG93TW9kYWwiLCJzaG93IiwiaGlkZSIsInJlbW92ZUNsYXNzIiwiY2hlY2tTdG9yYWdlIiwic3RvcmFnZSIsImdldERhdGEiLCJ0ZXh0IiwiUmVwb1NlbGVjdCIsImdldFJlcG9zIiwibG9jIiwidmFsIiwic2V0SXRlbSIsIkpTT04iLCJzdHJpbmdpZnkiLCJwYXJzZSIsImdldEl0ZW0iLCJjbGVhckRhdGEiLCJjbGVhciIsImRlbGV0ZURhdGEiLCJyZW1vdmVJdGVtIiwicmVzdWx0IiwidWlkIiwidG9TdHJpbmciLCJ3aW5kb3ciLCJsb2NhbFN0b3JhZ2UiLCJleGNlcHRpb24iLCJjb25zb2xlIiwibG9nIiwiJHRhYmxlQ29udGFpbmVyIiwiZm9ybWF0RGF0ZSIsInRvRGF0ZVN0cmluZyIsInNsaWNlIiwicmVwbGFjZSIsImVtcHR5IiwibGVuZ3RoIiwicmVuZGVyQ29tbWl0RXZlbnRzIiwicmVuZGVyVG9kb0V2ZW50cyIsInJlbmRlck1lcmdlRXZlbnRzIiwiZ2VuTGlzdFBhcnRzIiwiJGxpc3RJdGVtIiwiJGltZyIsIiRwYXJhZ3JhcGgiLCIkcGFyYVNwYW4iLCIkYSIsImJ1aWxkQW5jaG9yIiwiYnVpbGRDb2x1bW4iLCJudW0iLCJoZWFkaW5nIiwibGlzdCIsImZsYXR0ZW5Db21taXRzIiwiZXMiLCJmbGF0dGVuZWQiLCJmb3JFYWNoIiwiY29tbWl0cyIsImNvbW1pdCIsInB1c2giLCJtZXNzYWdlIiwic2hhIiwiYWxsRXZlbnRzIiwiJGxpc3QiLCJldnQiLCJhbmNob3JVcmwiLCJhbmNob3JUZXh0IiwiYXBwZW5kVG8iLCJjb21tZW50IiwiaHRtbF91cmwiLCJjb21taXRfaWQiLCJib2R5IiwiaXNzdWUiLCJudW1iZXIiLCJhY3Rpb24iLCJ0aXRsZSIsInJlZl90eXBlIiwicmVmIiwiam9pbiIsInB1bGxfcmVxdWVzdCIsIiRjb250YWluZXIiLCIkc3ZnRWxlbSIsImNyZWF0ZUVsZW1lbnROUyIsIm5zIiwiZm9ybWF0RGF0ZXMiLCJidWlsZERhdGVSYW5nZSIsImV2ZW50cyIsIm5vcm1EYXRlcyIsInN0YXJ0RGF0ZSIsInN0b3BEYXRlIiwiZGF0ZUFycmF5IiwiY3VycmVudERhdGUiLCJhZGREYXlzIiwiZ2V0Q2hhcnRZTWF4IiwicG9pbnRzIiwibWF4TnVtRXZ0cyIsInF1b3RpZW50IiwicmVkdWNlIiwiYSIsImIiLCJNYXRoIiwibWF4IiwiZmxvb3IiLCJwcmVwYXJlRGF0ZUV2ZW50cyIsInNvcnRlZEV2ZW50cyIsImNoYXJ0RGF0YSIsInNvcnQiLCJ4Iiwic2FtZURhbW5EYXkiLCJwb2ludHNBcnIiLCJnZW5Gb3JtYXR0ZWRQb2ludHMiLCJ4TXVsdGlwbGUiLCJ5TXVsdGlwbGUiLCJwb2ludCIsImluZCIsInhNYXJnaW4iLCJoZWlnaHQiLCJ5TWFyZ2luIiwiZ2VuZXJhdGVDaXJjbGVzIiwiZ3JvdXAiLCJudW1Qb2ludHMiLCJjaGFydFlNYXgiLCJ3aWR0aCIsInNwYWNlciIsImZvcm1hdHRlZFBvaW50cyIsImNpcmNsZSIsImN4IiwiY3kiLCJyIiwiZ2VuZXJhdGVMaW5lcyIsImkiLCJsaW5lIiwiZ2VuQXhpc0xhYmVscyIsImF4aXMiLCJudW1BeGlzVGlja3MiLCJ4UG9zIiwieFZhbHVlIiwieVBvcyIsInlWYWx1ZSIsInlTcGFjaW5nIiwicHJvdG90eXBlIiwiZGF5cyIsImRhdCIsInRoaXMiLCJ2YWx1ZU9mIiwic2V0RGF0ZSIsImdldERhdGUiLCIkc2VsZWN0Q29udGFpbmVyIiwiJHAiLCIkbGlzdENvbnRhaW5lciIsIiR1bCIsIiRuZXdSZXBvRm9ybSIsIiRuZXdSZXBvVXNlciIsIiRuZXdSZXBvUmVwbyIsIiRuZXdSZXBvQnRuIiwib24iLCJzaG93UmVwb0xpc3QiLCJzZWxlY3RSZXBvIiwiZGVsZXRlUmVwbyIsImFkZFJlcG8iLCJzdG9wUHJvcGFnYXRpb24iLCJ0b2dnbGVDbGFzcyIsInBpY2tlZCIsImNoaWxkcmVuIiwiaW5uZXJIVE1MIiwic3BsaXQiLCJzZWxlY3RlZFJlcG8iLCJwb3B1bGF0ZU1lbnUiLCJyZXBvcyIsInNlbGVjdGVkRWxlbWVudCIsInRhcmdldCIsInByZXZpb3VzRWxlbWVudFNpYmxpbmciLCJkYXRhc2V0IiwicGFyZW50Iiwic2VsZWN0ZWRFbGVtSWQiLCJzcGxpY2UiLCJyZW1vdmUiLCJhcGlVcmwiLCJuZXdBdXRob3IiLCJuZXdSZXBvIiwidW5zaGlmdCIsInNhdmVSZXBvcyIsIndhcm4iLCJwb3B1bGF0ZVJlcG9zIiwiZGF0YSIsInJlcG9aZXJvIiwiZnVsbF9uYW1lIiwiJGxpIiwib3duZXIiLCJkZXNjcmlwdGlvbiIsInVzZXJOYW1lIiwiQmFja2dyb3VuZHMiLCIkYm9keSIsIm1ha2VEYXRlIiwibG9hZFN0YXRlIiwic3RvcmVkU3RhdGUiLCJpbWdJbmR4IiwicmFuZG9tIiwiYmdBcnIiLCJuZXdTdGF0ZSIsImltZ05hbWUiLCJwaWNrQmFja2dyb3VuZCIsIm5ld0ltZ0luZGV4IiwibmV3SW1nTmFtZSIsImN1cm50SW1nSW5keCIsInN0YXRlIiwidG9kYXkiLCJpbWFnZU5hbWUiLCJjc3MiLCJyZWFkeSJdLCJtYXBwaW5ncyI6IllBR0EsSUFBQUEsUUFBQSxTQUFBQyxHQU1BLFFBQUFDLEtBQ0FDLEVBQUFDLFdBQUFILEVBQUEsZUFLQSxRQUFBSSxLQUNBRixFQUFBQyxXQUFBRSxPQUFBQyxHQUtBLFFBQUFDLEdBQUFDLEdBQ0EsT0FDQUMsS0FBQUQsRUFBQUMsS0FDQUMsS0FBQUYsRUFBQUcsV0FDQUMsTUFBQUosRUFBQUksTUFBQUMsY0FDQUMsT0FBQU4sRUFBQUksTUFBQUcsV0FDQUMsUUFBQVIsRUFBQVEsU0FNQSxRQUFBVixHQUFBVyxFQUFBQyxHQUVBLEdBQUFDLEdBQUEsK0JBQ0FDLEVBQUFELEVBQUEsSUFBQUYsRUFBQSxJQUFBQyxFQUFBLFNBRUFsQixHQUFBcUIsUUFBQUQsR0FBQUUsS0FBQUMsR0FLQSxRQUFBQSxHQUFBQyxHQUdBLEdBQUFDLElBQUEsWUFDQSxzQkFHQUMsR0FBQSxjQUNBLG9CQUNB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Q29udGVudCI6WyIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgalF1ZXJ5LCBkb2N1bWVudCwgUmVuZGVyVGFibGUsIFJlbmRlckNoYXJ0ICovXG5cbnZhciBIaXRBcGkgPSAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBET00gPSB7fTtcbiAgICBcbiAgICBcbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICBmdW5jdGlvbiBjYWNoZURvbSgpIHtcbiAgICAgICAgRE9NLiRpbnB1dEZvcm0gPSAkKCcjaW5wdXQtZm9ybScpO1xuICAgIH1cbiAgICBcblxuICAgIC8vIGJpbmQgZXZlbnRzXG4gICAgZnVuY3Rpb24gYmluZEV2ZW50cygpIHtcbiAgICAgICAgRE9NLiRpbnB1dEZvcm0uc3VibWl0KGdldEV2ZW50cyk7XG4gICAgfVxuXG5cbiAgICAvLyBwcmVwYXJlIGV2ZW50cyBwcmlvciB0byBjYWxsaW5nIHJlbmRlcmVyc1xuICAgIGZ1bmN0aW9uIHByZXBhcmVFdmVudHMoZSkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgdHlwZSAgICA6IGUudHlwZSxcbiAgICAgICAgICAgIGRhdGUgICAgOiBlLmNyZWF0ZWRfYXQsXG4gICAgICAgICAgICBhY3RvciAgIDogZS5hY3Rvci5kaXNwbGF5X2xvZ2luLFxuICAgICAgICAgICAgYXZhdGFyICA6IGUuYWN0b3IuYXZhdGFyX3VybCxcbiAgICAgICAgICAgIHBheWxvYWQgOiBlLnBheWxvYWRcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICBcbiAgICAvLyBnZXQgZ2l0aHViIGV2ZW50c1xuICAgIGZ1bmN0aW9uIGdldEV2ZW50cyhhdXRob3IsIHJlcG8pIHtcbiAgICAgICAgXG4gICAgICAgIHZhciB1cmw9ICdodHRwczovL2FwaS5naXRodWIuY29tL3JlcG9zJyxcbiAgICAgICAgICAgIHJlcG9FdmVudHMgPSBgJHt1cmx9LyR7YXV0aG9yfS8ke3JlcG99L2V2ZW50c2A7XG5cbiAgICAgICAgJC5nZXRKU09OKHJlcG9FdmVudHMpLnRoZW4oaGFuZGxlUmVzcG9uc2UpO1xuICAgIH1cblxuXG4gICAgLy8gaGFuZGxlIEdIIEpTT04gcmVzcG9uc2UgZGF0YVxuICAgIGZ1bmN0aW9uIGhhbmRsZVJlc3BvbnNlKHJlc3BvbnNlKSB7XG4gICAgICAgIFxuICAgICAgICAvLyB3ZSdyZSBzcGxpdHRpbmcgZXZlbnRzIGludG8gMyBjYXRlZ29yaWVzLCBiYXNlZCBvbiBldmVudCB0eXBlXG4gICAgICAgIHZhciBjb21taXRUeXBlcyA9IFsnUHVzaEV2ZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICdDb21taXRDb21tZW50RXZlbnQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIHRvZG9UeXBlcyAgID0gWydJc3N1ZXNFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnSXNzdWVDb21tZW50RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1Byb2plY3RFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnUHJvamVjdENhcmRFdmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAnUHJvamVjdENvbHVtbkV2ZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICBtZXJnZVR5cGVzICA9IFsnQ3JlYXRlRXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0UmV2aWV3RXZlbnQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1B1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudEV2ZW50J1xuICAgICAgICAgICAgICAgICAgICAgICAgICBdLFxuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBjcmVhdGUgYXJyYXlzIG9mIHJlbGF0ZWQgZXZlbnQgdHlwZXNcbiAgICAgICAgICAgIGNvbW1pdEV2ZW50cyA9IGZpbHRlclJlcyhyZXNwb25zZSwgY29tbWl0VHlwZXMpLFxuICAgICAgICAgICAgdG9kb0V2ZW50cyAgID0gZmlsdGVyUmVzKHJlc3BvbnNlLCB0b2RvVHlwZXMpLFxuICAgICAgICAgICAgbWVyZ2VFdmVudHMgID0gZmlsdGVyUmVzKHJlc3BvbnNlLCBtZXJnZVR5cGVzKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGNhbGwgcmVuZGVyZXJzXG4gICAgICAgIFJlbmRlclRhYmxlLnJlbmRlcihjb21taXRFdmVudHMsIHRvZG9FdmVudHMsIG1lcmdlRXZlbnRzKTtcbiAgICAgICAgUmVuZGVyQ2hhcnQucmVuZGVyKHJlc3BvbnNlLm1hcChwcmVwYXJlRXZlbnRzKSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGZpbHRlciByZXNwb25zZXMgYnkgZXZlbnQgdHlwZVxuICAgICAqXG4gICAgICogQHBhcmFtcyAgIFthcnJheV0gIHJlcyAgICBbdGhlIHdob2xlIEpTT04gcmVzcG9uc2UgYXJyYXldXG4gICAgICogQHBhcmFtcyAgIFthcnJheV0gIHR5cGVzICBbdGhlIHNwZWNpZmljIGV2ZW50IHR5cGVzIHRvIGZpbHRlcl1cbiAgICAgKiBAcmV0dXJucyAgW2FycmF5XSAgICAgICAgIFtmaWx0ZXJlZCBhcnJheSBvZiBldmVudHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBmaWx0ZXJSZXMocmVzLCB0eXBlcykge1xuICAgICAgICByZXR1cm4gcmVzXG4gICAgICAgICAgICAuZmlsdGVyKChlKSA9PiB0eXBlcy5pbmRleE9mKGUudHlwZSkgIT09IC0xKVxuICAgICAgICAgICAgLm1hcChwcmVwYXJlRXZlbnRzKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgYmluZEV2ZW50cygpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZXR1cm4gcHVibGljIG1ldGhvZHNcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICBnZXRFdmVudHM6IGdldEV2ZW50c1xuICAgIH07XG5cbn0oalF1ZXJ5KSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgalF1ZXJ5LCBkb2N1bWVudCwgY29uc29sZSwgTFMsIFJlcG9TZWxlY3QgKi9cblxudmFyIEdyZWV0ID0gKGZ1bmN0aW9uKCQpIHtcbiAgICBcbiAgICB2YXIgbmFtZSxcbiAgICAgICAgZ2l0aHViTmFtZSxcbiAgICAgICAgRE9NID0ge30sXG4gICAgICAgIFxuICAgICAgICAvLyBtb2RhbCBwcm9tcHQgdGVtcGxhdGVcbiAgICAgICAgbW9kYWxGb3JtID0gYDxmb3JtIGlkPVwidXNlci1tb2RhbC1mb3JtXCIgY2xhc3M9XCJHcmlkIEdyaWQtLWd1dHRlcnMgR3JpZC0tZnVsbFwiIGFjdGlvbj1cInN1Ym1pdFwiPlxuICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiR3JpZC1jZWxsIElucHV0QWRkT25cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8c3BhbiBjbGFzcz1cIklucHV0QWRkT24taXRlbVwiPllvdXIgTmFtZTo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwidXNlci1tb2RhbC1uYW1lXCIgY2xhc3M9XCJJbnB1dEFkZE9uLWZpZWxkXCIgdHlwZT1cInRleHRcIiByZXF1aXJlZD5cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3M9XCJHcmlkLWNlbGwgSW5wdXRBZGRPblwiPlxuICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzPVwiSW5wdXRBZGRPbi1pdGVtXCI+R2l0SHViIFVzZXIgTmFtZTo8L3NwYW4+XG4gICAgICAgICAgICAgICAgICAgICAgPGlucHV0IGlkPVwidXNlci1tb2RhbC11c2VybmFtZVwiICBjbGFzcz1cIklucHV0QWRkT24tZmllbGRcIiB0eXBlPVwidGV4dFwiIHJlcXVpcmVkPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzPVwiR3JpZC1jZWxsIElucHV0QWRkT25cIj5cbiAgICAgICAgICAgICAgICAgICAgICA8YnV0dG9uIGNsYXNzPVwiSW5wdXRBZGRPbi1pdGVtXCIgaWQ9XCJ1c2VyLW1vZGFsLWJ1dHRvblwiPkdvITwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgPC9mb3JtPmA7XG4gICAgXG4gICAgXG4gICAgLy8gY2FjaGUgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gY2FjaGVEb20oKSB7XG4gICAgICAgIERPTS4kZ3JlZXRpbmcgICAgPSAkKCcuZ3JlZXRpbmcnKTtcbiAgICAgICAgRE9NLiRvdmVybGF5ICAgICA9ICQoJzxkaXYgaWQ9XCJvdmVybGF5XCI+PC9kaXY+Jyk7XG4gICAgICAgIERPTS4kbW9kYWxQcm9tcHQgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpKTtcbiAgICAgICAgRE9NLiRtb2RhbEVycm9yICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgncCcpKTtcblxuICAgICAgICBET00uJG1vZGFsUHJvbXB0XG4gICAgICAgICAgICAuYXR0cignaWQnLCAndXNlci1tb2RhbCcpXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3VzZXItbW9kYWwnKVxuICAgICAgICAgICAgLmh0bWwobW9kYWxGb3JtKTtcbiAgICAgICAgXG4gICAgICAgIERPTS4kbW9kYWxFcnJvclxuICAgICAgICAgICAgLmFkZENsYXNzKCd1c2VyLW1vZGFsLWVycm9yJylcbiAgICAgICAgICAgIC5odG1sKCdHaXRIdWIgVXNlcm5hbWUgTm90IEZvdW5kJyk7XG4gICAgICAgIFxuICAgICAgICAkKCdib2R5JylcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRtb2RhbFByb21wdCk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGJpbmQgZXZlbnRzXG4gICAgZnVuY3Rpb24gYmluZEV2ZW50cygpIHtcbiAgICAgICAgJCgnI3VzZXItbW9kYWwtZm9ybScpLnN1Ym1pdChoYW5kbGVTdWJtaXQpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBoYW5kbGUgbW9kYWwgc3VibWl0XG4gICAgZnVuY3Rpb24gaGFuZGxlU3VibWl0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBcbiAgICAgICAgLy8gc2V0IG1vZHVsZSBzY29wZSBuYW1lcyB0byBpbnB1dCBuYW1lc1xuICAgICAgICBuYW1lID0gZS5jdXJyZW50VGFyZ2V0WzBdLnZhbHVlLnRyaW0oKTtcbiAgICAgICAgZ2l0aHViTmFtZSA9IGUuY3VycmVudFRhcmdldFsxXS52YWx1ZS50cmltKCk7XG4gICAgICAgIFxuICAgICAgICBjaGVja1VzZXIoZ2l0aHViTmFtZSlcbiAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzLmxvZ2luID09PSBnaXRodWJOYW1lKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAvLyBzYXZlIHVzZXIgZGV0YWlscyB0byBsb2NhbCBzdG9yYWdlXG4gICAgICAgICAgICAgICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLXVzZXInLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lICAgICA6IGUuY3VycmVudFRhcmdldFswXS52YWx1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGdpdGh1Yk5hbWUgOiBlLmN1cnJlbnRUYXJnZXRbMV0udmFsdWVcbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0cmFjdCB0aGUgbW9kYWwgcGFuZWxcbiAgICAgICAgICAgICAgICAgICAgaGlkZU1vZGFsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBkaXNwbGF5IG1lc3NhZ2VcbiAgICAgICAgICAgICAgICAgICAgZGlzcGxheU1lc3NhZ2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmNhdGNoKGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHdhcm4gdXNlclxuICAgICAgICAgICAgICAgIERPTS4kbW9kYWxQcm9tcHRcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChET00uJG1vZGFsRXJyb3IpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB9KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gY2hlY2sgR2l0aHViIHVzZXJuYW1lXG4gICAgZnVuY3Rpb24gY2hlY2tVc2VyKHUpIHtcbiAgICAgICAgcmV0dXJuICQuZ2V0SlNPTignaHR0cHM6Ly9hcGkuZ2l0aHViLmNvbS91c2Vycy8nICsgdSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGFzc2VtYmxlIHRpbWUtYmFzZWQgbWVzc2FnZSB0byBncmVldCB1c2VyXG4gICAgZnVuY3Rpb24gbWFrZU1lc3NhZ2UoKSB7XG4gICAgICAgIHZhciB0aW1lT2ZEYXksXG4gICAgICAgICAgICB0ZWhEYXRlID0gbmV3IERhdGUoKSxcbiAgICAgICAgICAgIGluaXRpYWxIb3VyID0gdGVoRGF0ZS5nZXRIb3VycygpO1xuICAgICAgICBcbiAgICAgICAgaWYgKGluaXRpYWxIb3VyIDwgMTIpIHtcbiAgICAgICAgICAgIHRpbWVPZkRheSA9IFwibW9ybmluZ1wiO1xuICAgICAgICB9IGVsc2UgaWYgKGluaXRpYWxIb3VyID49IDEyICYmIGluaXRpYWxIb3VyIDwgMTcpIHtcbiAgICAgICAgICAgIHRpbWVPZkRheSA9IFwiYWZ0ZXJub29uXCI7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aW1lT2ZEYXkgPSBcImV2ZW5pbmdcIjtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBgR29vZCAke3RpbWVPZkRheX0sICR7bmFtZX0uYDtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gc2hvdyBtb2RhbCBwYW5lbC4gU2xpZGVzIGRvd24gZnJvbSB0b3BcbiAgICBmdW5jdGlvbiBzaG93TW9kYWwoKSB7XG4gICAgICAgIFxuICAgICAgICAvLyBzaG93IG92ZXJsYXlcbiAgICAgICAgRE9NLiRvdmVybGF5LnNob3coKTtcbiAgICAgICAgXG4gICAgICAgIC8vIHNob3cgbW9kYWxcbiAgICAgICAgRE9NLiRtb2RhbFByb21wdFxuICAgICAgICAgICAgLmFkZENsYXNzKCd1c2VyLW1vZGFsLXNob3cnKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcmV0cmFjdCBtb2RhbCBwYW5lbFxuICAgIGZ1bmN0aW9uIGhpZGVNb2RhbCgpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIHNob3cgb3ZlcmxheVxuICAgICAgICBET00uJG92ZXJsYXkuaGlkZSgpO1xuICAgICAgICBcbiAgICAgICAgLy8gaGlkZSBtb2RhbFxuICAgICAgICBET00uJG1vZGFsUHJvbXB0XG4gICAgICAgICAgICAucmVtb3ZlQ2xhc3MoJ3VzZXItbW9kYWwtc2hvdycpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBjaGVjayBsb2NhbCBzdG9yYWdlIGZvciB1c2VyXG4gICAgZnVuY3Rpb24gY2hlY2tTdG9yYWdlKCkge1xuICAgICAgICBcbiAgICAgICAgdmFyIHN0b3JhZ2UgPSBMUy5nZXREYXRhKCdkZXYtZGFzaC11c2VyJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBpZiB1c2VyIGZvdW5kIGluIGxvY2FsIHN0b3JhZ2UsIGdvIHN0cmFpZ2h0IHRvIGdyZWV0aW5nLlxuICAgICAgICAvLyBvdGhlcndpc2UsIHNob3cgbW9kYWwgJiBwcm9tcHQgdXNlciBmb3IgZGV0YWlsc1xuICAgICAgICBpZiAoc3RvcmFnZSAmJiBzdG9yYWdlLm5hbWUpIHtcbiAgICAgICAgICAgIG5hbWUgPSBzdG9yYWdlLm5hbWU7XG4gICAgICAgICAgICBnaXRodWJOYW1lID0gc3RvcmFnZS5naXRodWJOYW1lO1xuICAgICAgICAgICAgZGlzcGxheU1lc3NhZ2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHNob3dNb2RhbCgpO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuXG4gICAgLy8gcmVuZGVyIERPTSBhbmQgY2FsbCBSZXBvU2VsZWN0LmdldFJlcG9zKClcbiAgICBmdW5jdGlvbiBkaXNwbGF5TWVzc2FnZSgpIHtcbiAgICAgICAgRE9NLiRncmVldGluZy50ZXh0KG1ha2VNZXNzYWdlKCkpO1xuICAgICAgICBSZXBvU2VsZWN0LmdldFJlcG9zKGdpdGh1Yk5hbWUpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwdWJsaWMgaW5pdCBtZXRob2RcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBjYWNoZURvbSgpO1xuICAgICAgICBcbiAgICAgICAgRE9NLiRvdmVybGF5LmhpZGUoKTtcbiAgICAgICAgJCgnYm9keScpLmFwcGVuZChET00uJG92ZXJsYXkpOyAvLyB0aGVuIGFwcGVuZCBpdCB0byBET01cbiAgICAgICAgXG4gICAgICAgIGJpbmRFdmVudHMoKTtcbiAgICAgICAgXG4gICAgICAgIGNoZWNrU3RvcmFnZSgpO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBleHBvcnQgcHVibGljIG1ldGhvZHNcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0XG4gICAgfTtcbiAgICBcbn0oalF1ZXJ5KSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgd2luZG93ICovXG5cbnZhciBMUyA9IChmdW5jdGlvbigpIHtcblxuICAgLyoqIFxuICAgICogbG9jYWxTdG9yYWdlIGZlYXR1cmUgZGV0ZWN0ICYgcmV0dXJuIGxvY2FsIHJlZmVyZW5jZVxuICAgICogQHBhcmFtICAgICAgIFtub25lXVxuICAgICogQHJldHVybnMgICAgIFtCT09MRUFOXSAgIFtyZXR1cm5zIHRydWUgaWYgc3RvcmVkIHN0cmluZyA9PT0gdWlkXVxuICAgICovXG4gICB2YXIgc3RvcmFnZSA9IChmdW5jdGlvbigpIHtcbiAgICAgIHZhciB1aWQgPSBuZXcgRGF0ZSgpLnRvU3RyaW5nKCksIC8vIGRhdGUgbXVzdCBiZSBhIHN0cmluZ1xuICAgICAgICAgc3RvcmFnZSxcbiAgICAgICAgIHJlc3VsdDtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgIHN0b3JhZ2UgPSB3aW5kb3cubG9jYWxTdG9yYWdlO1xuICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKHVpZCwgdWlkKTtcbiAgICAgICAgIHJlc3VsdCA9IHN0b3JhZ2UuZ2V0SXRlbSh1aWQpID09PSB1aWQ7XG4gICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0odWlkKTtcbiAgICAgICAgIHJldHVybiByZXN1bHQgJiYgc3RvcmFnZTtcbiAgICAgIH0gY2F0Y2ggKGV4Y2VwdGlvbikge1xuICAgICAgICAgIGNvbnNvbGUubG9nKCdQcm9ibGVteiEnKTtcbiAgICAgIH1cbiAgIH0oKSk7XG5cbiAgIC8qKiBcbiAgICAqIFN0b3JlIGl0ZW0gaW4gbG9jYWwgc3RvcmFnZSBpZiBzdG9yYWdlIGV4aXN0c1xuICAgICogQHBhcmFtICAgICAgIFtzdHJpbmddICAgIGxvYyAgICAgICAgIFtsb2NhbCBzdG9yYWdlIHN1Yi1sb2NhdGlvbl1cbiAgICAqIEBwYXJhbSAgICAgICBbc3RyaW5nXSAgICB2YWwgICAgICAgICBbc3RyaW5nIHRvIGJlIHN0b3JlZF1cbiAgICAqIEBwYXJhbSAgICAgICBbZnVuY3Rpb25dICBzdG9yYWdlICAgICBbbG9jYWxTdG9yYWdlIGZlYXR1cmUgZGV0ZWN0ICYgbG9jYWwgcmVmXVxuICAgICovXG4gICBmdW5jdGlvbiBzZXREYXRhKGxvYywgdmFsKSB7XG4gICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgc3RvcmFnZS5zZXRJdGVtKGxvYywgSlNPTi5zdHJpbmdpZnkodmFsKSk7XG4gICAgICB9XG4gICB9XG5cbiAgIC8qKiBcbiAgICAqIEdldCBsb2NhbCBzdG9yYWdlIGlmIHN0b3JhZ2UgZXhpc3RzXG4gICAgKiBAcGFyYW0gICAgICAgW3N0cmluZ10gICAgbG9jICAgICAgICAgW2xvY2FsIHN0b3JhZ2Ugc3ViLWxvY2F0aW9uXVxuICAgICogQHBhcmFtICAgICAgIFtmdW5jdGlvbl0gIHN0b3JhZ2UgICAgIFtsb2NhbFN0b3JhZ2UgZmVhdHVyZSBkZXRlY3QgJiBsb2NhbCByZWZdXG4gICAgKiBAcmV0dXJucyAgICAgW0pTT04gc3RyaW5nXSAgICAgICAgICAgW2ZldGNoIHN0b3JlZCBzdHJpbmcsIHJldHVybiBKU09OXVxuICAgICovXG4gICBmdW5jdGlvbiBnZXREYXRhKGxvYykge1xuICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKHN0b3JhZ2UuZ2V0SXRlbShsb2MpKTtcbiAgICAgIH1cbiAgIH1cblxuICAgLyoqIFxuICAgICogRGVsZXRlIEFMTCBrZXlzIGZyb20gbG9jYWwgc3RvcmFnZSBpZiBwYXNzXG4gICAgKiBAcGFyYW0gICAgICAgW2Z1bmN0aW9uXSAgc3RvcmFnZSAgICAgW2xvY2FsU3RvcmFnZSBmZWF0dXJlIGRldGVjdCAmIGxvY2FsIHJlZl1cbiAgICAqIEByZXR1cm5zICAgICBbZnVuY3Rpb25dICAuY2xlYXIgICAgICBbd2lwZXMgbG9jYWwgc3RvcmFnZV1cbiAgICAqL1xuICAgZnVuY3Rpb24gY2xlYXJEYXRhKCkge1xuICAgICAgaWYgKHN0b3JhZ2UpIHtcbiAgICAgICAgIHJldHVybiBzdG9yYWdlLmNsZWFyKCk7XG4gICAgICB9XG4gICB9XG5cbiAgIC8qKiBcbiAgICAqIERlbGV0ZSBPTkUga2V5IGZyb20gbG9jYWwgc3RvcmFnZSBpZiBwYXNzXG4gICAgKiBAcGFyYW0gICAgICAgW3N0cmluZ10gICAgbG9jICAgICAgICAgW3RoZSBrZXkgdG8gZGVsZXRlIGZyb20gbG9jYWxTdG9yYWdlXVxuICAgICogQHBhcmFtICAgICAgIFtmdW5jdGlvbl0gIHN0b3JhZ2UgICAgIFtsb2NhbFN0b3JhZ2UgZmVhdHVyZSBkZXRlY3QgJiBsb2NhbCByZWZdXG4gICAgKiBAcmV0dXJucyAgICAgW2Z1bmN0aW9uXSAgLmNsZWFyICAgICAgW3dpcGVzIGxvY2FsIHN0b3JhZ2VdXG4gICAgKi9cbiAgIGZ1bmN0aW9uIGRlbGV0ZURhdGEobG9jKSB7XG4gICAgICBpZiAoc3RvcmFnZSkge1xuICAgICAgICAgcmV0dXJuIHN0b3JhZ2UucmVtb3ZlSXRlbShsb2MpO1xuICAgICAgfVxuICAgfVxuXG4gICByZXR1cm4ge1xuICAgICAgc2V0RGF0YTogc2V0RGF0YSxcbiAgICAgIGdldERhdGE6IGdldERhdGEsXG4gICAgICBkZWxldGVEYXRhOiBkZWxldGVEYXRhLFxuICAgICAgY2xlYXJEYXRhOiBjbGVhckRhdGFcbiAgIH07XG5cbn0oKSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgalF1ZXJ5LCBkb2N1bWVudCAqL1xuXG52YXIgUmVuZGVyVGFibGUgPSAoZnVuY3Rpb24gKCQpIHtcblxuICAgIHZhciBET00gPSB7fTtcbiAgICBcbiAgICBcbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICBmdW5jdGlvbiBjYWNoZURvbSgpIHtcbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lciA9ICQoJy50YWJsZS1jb250YWluZXInKTtcbiAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGZvcm1hdCBkYXRlc1xuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGUoZGF0ZSkge1xuXG4gICAgICAgIHJldHVybiBuZXcgRGF0ZShkYXRlKSAgICAgLy8gbWFrZSBkYXRlIG9iamVjdCBmb3IgZGF5ICYgbW9udGggYWJicmV2XG4gICAgICAgICAgICAudG9EYXRlU3RyaW5nKCkgICAgICAgLy8gY29udmVydCBvYmplY3QgdG8gYSBzdHJpbmdcbiAgICAgICAgICAgIC5zbGljZSgwLCAxNSkgICAgICAgICAvLyByZW1vdmUgZXZlcnl0aGluZyBhZnRlciB0aGUgWVlZWVxuICAgICAgICAgICAgLnJlcGxhY2UoLyAwL2csICcgJyk7IC8vIHJlbW92ZSBsZWFkaW5nIHplcm9zIChleC4gJzA0JyA9PiAnNCcpXG4gICAgfVxuXG5cbiAgICAvLyBwdWJsaWMgcmVuZGVyIG1ldGhvZCBjYWxscyBjYXRlZ29yeSByZW5kZXJlcnMgaWYgY2F0ZWdvcnkgaGFzIGV2ZW50c1xuICAgIGZ1bmN0aW9uIHJlbmRlcihjb21taXRFdmVudHMsIHRvZG9FdmVudHMsIG1lcmdlRXZlbnRzKSB7XG5cbiAgICAgICAgLy8gY2xlYXIgcHJldmlvdXMgcmVzdWx0c1xuICAgICAgICBET00uJHRhYmxlQ29udGFpbmVyXG4gICAgICAgICAgICAuZW1wdHkoKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChjb21taXRFdmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgcmVuZGVyQ29tbWl0RXZlbnRzKGNvbW1pdEV2ZW50cyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodG9kb0V2ZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICByZW5kZXJUb2RvRXZlbnRzKHRvZG9FdmVudHMpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG1lcmdlRXZlbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHJlbmRlck1lcmdlRXZlbnRzKG1lcmdlRXZlbnRzKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyB1dGlsaXR5IHRoYXQgZ2VuZXJhdGVzIHJlcGVhdGVkIGxpc3QgRE9NIGVsZW1lbnRzXG4gICAgZnVuY3Rpb24gZ2VuTGlzdFBhcnRzKCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgJGxpc3RJdGVtICA6ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKSksXG4gICAgICAgICAgICAkaW1nICAgICAgIDogJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKSksXG4gICAgICAgICAgICAkcGFyYWdyYXBoIDogJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdwJykpLFxuICAgICAgICAgICAgJHBhcmFTcGFuICA6ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpKSxcbiAgICAgICAgICAgICRhICAgICAgICAgOiAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKSlcbiAgICAgICAgfTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgXG4gICAgLyogYXNzZW1ibGUgPGE+IERPTSBlbGVtZW50c1xuICAgICAqXG4gICAgICogQHBhcmFtcyAgW3N0cmluZ10gICB1cmwgICAgW2xpbmsgdXJsXVxuICAgICAqIEBwYXJhbXMgIFtzdHJpbmddICAgdGV4dCAgIFtsaW5rIHRleHRdXG4gICAgICogQHJldHVybnMgW29iamVjdF0gICAgICAgICAgW2Fzc2VtYmxlZCA8YT4gRE9NIG9iamVjdF1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkQW5jaG9yKHVybCwgdGV4dCkge1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpKVxuICAgICAgICAgICAgLmF0dHIoJ3RhcmdldCcsICdfYmxhbmsnKVxuICAgICAgICAgICAgLmF0dHIoJ2hyZWYnLCB1cmwpXG4gICAgICAgICAgICAuaHRtbChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke3RleHR9PC9zcGFuPmApO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvKiBhc3NlbWJsZSB0YWJsZS1jb2wgZnJvbSBsaXN0IERPTSBlbGVtZW50c1xuICAgICAqXG4gICAgICogQHBhcmFtcyAgW251bWJlcl0gICBudW0gICAgICAgW251bWJlciBvZiBldmVudHMgaW4gY29sdW1uXVxuICAgICAqIEBwYXJhbXMgIFtzdHJpbmddICAgaGVhZGluZyAgIFtkZXNjcmlwdGlvbiBvZiBjb2wncyBldmVudHNdXG4gICAgICogQHBhcmFtcyAgW29iamVjdF0gICBsaXN0ICAgICAgW3RoZSBsaXN0IGpxdWVyeSBvYmplY3RdXG4gICAgICogQHJldHVybnMgW29iamVjdF0gICAgICAgICAgICAgW2Fzc2VtYmxlZCBjb2x1bW4gRE9NIG9iamVjdF1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGJ1aWxkQ29sdW1uKG51bSwgaGVhZGluZywgbGlzdCkge1xuICAgICAgICByZXR1cm4gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSlcbiAgICAgICAgICAgIC5hZGRDbGFzcygndGFibGUtY29sJylcbiAgICAgICAgICAgIC5hcHBlbmQoYDxoMz4ke251bX0gJHtoZWFkaW5nfTwvaDM+YClcbiAgICAgICAgICAgIC5hcHBlbmQobGlzdCk7ICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogZnVuY3Rpb24gdG8gZmxhdHRlbiBsaXN0IG9mIGNvbW1pdC1yZWxhdGVkIGV2ZW50cy5cbiAgICAgKiBQdXNoIEV2ZW50cyBpbmNsdWRlIGFycmF5cyBvZiBjb21taXRzLCB3aGljaCBuZWVkXG4gICAgICogdG8gYmUgcHVsbGVkIG91dCBzZXBhcmF0ZWx5IGlmIHdlJ3JlIHRvIGFwcGVuZCBlYWNoXG4gICAgICogY29tbWl0IHRvIHRoZSBsaXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgIFthcnJheV0gICBlcyAgIFthbGwgZXZlbnRzXVxuICAgICAqIEByZXR1cm5zICAgW2FycmF5XSAgICAgICAgW2ZsYXR0ZW5lZCBhcnJheV1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGZsYXR0ZW5Db21taXRzKGVzKSB7XG4gICAgICAgIFxuICAgICAgICB2YXIgZmxhdHRlbmVkID0gW107XG4gICAgICAgIFxuICAgICAgICBlcy5mb3JFYWNoKGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChlLnR5cGUgPT09ICdQdXNoRXZlbnQnKSB7XG4gICAgICAgICAgICAgICAgLy8gaXQncyBhIFB1c2ggRXZlbnQsIGV4dHJhY3QgJiBwdXNoIHNlcGFyYXRlIGNvbW1pdHNcbiAgICAgICAgICAgICAgICBlLnBheWxvYWQuY29tbWl0cy5mb3JFYWNoKGZ1bmN0aW9uIChjb21taXQpIHtcbiAgICAgICAgICAgICAgICAgICAgZmxhdHRlbmVkLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICAgICAgYWN0b3IgICA6IGUuYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBhdmF0YXIgIDogZS5hdmF0YXIsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRlICAgIDogZS5kYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZSA6IGNvbW1pdC5tZXNzYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2hhICAgICA6IGNvbW1pdC5zaGEsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlICAgIDogJ2NvbW1pdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICB1cmwgICAgIDogY29tbWl0LnVybFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgLy8gaXQncyBhIGNvbW1lbnQgLSBwdXNoIHN0cmFpZ2h0IHRvICdhbGxFdmVudHMnXG4gICAgICAgICAgICAgICAgZmxhdHRlbmVkLnB1c2goZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfSk7XG4gICAgICAgIFxuICAgICAgICByZXR1cm4gZmxhdHRlbmVkO1xuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZW5kZXIgY29tbWl0IGV2ZW50c1xuICAgIGZ1bmN0aW9uIHJlbmRlckNvbW1pdEV2ZW50cyhlcykge1xuXG4gICAgICAgIC8vIHJlY2VpdmVzIFB1c2hFdmVudCAmIENvbW1pdENvbW1lbnRFdmVudCBldmVudCB0eXBlc1xuXG4gICAgICAgIHZhciBhbGxFdmVudHMgPSBmbGF0dGVuQ29tbWl0cyhlcyksXG4gICAgICAgICAgICBoZWFkaW5nID0gJ0NvbW1pdC1SZWxhdGVkIEV2ZW50cycsXG4gICAgICAgICAgICAkbGlzdCAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKTtcbiAgICAgICAgXG4gICAgICAgIGFsbEV2ZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChldnQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZXZ0KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGxpc3QgPSBnZW5MaXN0UGFydHMoKSxcbiAgICAgICAgICAgICAgICBhbmNob3JVcmwsXG4gICAgICAgICAgICAgICAgYW5jaG9yVGV4dDtcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnY29tbWl0Jykge1xuXG4gICAgICAgICAgICAgICAgLy8gY29udmVydCBhcGkgVVJsIHRvIGh0bWwgVVJMXG4gICAgICAgICAgICAgICAgYW5jaG9yVXJsID0gKGV2dC51cmwpXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9cXC9cXC9hcGkuLywgJ1xcL1xcLycpICAgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL3JlcG9zXFwvLywgJ1xcLycpICAgICAvLyByZW1vdmUgJ3JlcG9zLydcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2NvbW1pdHMvLCAnY29tbWl0Jyk7ICAvLyBzaW5ndWxhciAnY29tbWl0J1xuXG4gICAgICAgICAgICAgICAgYW5jaG9yVGV4dCA9IChldnQuc2hhKS5zbGljZSgwLDYpO1xuXG4gICAgICAgICAgICAgICAgbGlzdC4kaW1nXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kVG8obGlzdC4kbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICAgICAgbGlzdC4kcGFyYVNwYW5cbiAgICAgICAgICAgICAgICAgICAgLnRleHQoYFwiJHtldnQubWVzc2FnZX1cImApO1xuXG4gICAgICAgICAgICAgICAgbGlzdC4kcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21taXR0ZWQgYCk7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIGVsc2UgaXQncyBhIGNvbW1lbnRcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhbmNob3JVcmwgPSBldnQucGF5bG9hZC5jb21tZW50Lmh0bWxfdXJsO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFuY2hvclRleHQgPSAoZXZ0LnBheWxvYWQuY29tbWVudC5jb21taXRfaWQpLnNsaWNlKDAsNik7XG5cbiAgICAgICAgICAgICAgICBsaXN0LiRpbWdcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3NyYycsIGV2dC5hdmF0YXIpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhsaXN0LiRsaXN0SXRlbSk7XG5cbiAgICAgICAgICAgICAgICBsaXN0LiRwYXJhU3BhblxuICAgICAgICAgICAgICAgICAgICAudGV4dChgXCIke2V2dC5wYXlsb2FkLmNvbW1lbnQuYm9keX1cImApO1xuXG4gICAgICAgICAgICAgICAgbGlzdC4kcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21tZW50ZWQgb24gYCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGlzdC4kcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgLmFwcGVuZChidWlsZEFuY2hvcihhbmNob3JVcmwsIGFuY2hvclRleHQpKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2Zvcm1hdERhdGUoZXZ0LmRhdGUpfTogYClcbiAgICAgICAgICAgICAgICAuYXBwZW5kKGxpc3QuJHBhcmFTcGFuKVxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbyhsaXN0LiRsaXN0SXRlbSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpc3QuJGxpc3RJdGVtXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRsaXN0KTtcblxuICAgICAgICB9KTtcblxuICAgICAgICAkbGlzdFxuICAgICAgICAgICAgLmFkZENsYXNzKCdjb2wtbGlzdCcpO1xuXG4gICAgICAgIERPTS4kdGFibGVDb250YWluZXJcbiAgICAgICAgICAgIC5hcHBlbmQoYnVpbGRDb2x1bW4oYWxsRXZlbnRzLmxlbmd0aCwgaGVhZGluZywgJGxpc3QpKTtcbiAgICAgICAgXG4gICAgfVxuXG5cbiAgICAvLyByZW5kZXIgdG9kbyBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJUb2RvRXZlbnRzKGVzKSB7XG5cbiAgICAgICAgLy8gZ2V0cyBJc3N1ZXNFdmVudHMsIElzc3VlQ29tbWVudEV2ZW50cywgUHJvamVjdEV2ZW50cyxcbiAgICAgICAgLy8gICBQcm9qZWN0Q2FyZEV2ZW50cywgYW5kIFByb2plY3RDb2x1bW5FdmVudHNcblxuICAgICAgICB2YXIgaGVhZGluZyA9ICdUb2RvLVJlbGF0ZWQgRXZlbnRzJyxcbiAgICAgICAgICAgICRsaXN0ICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJykpO1xuXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhldnQpO1xuXG4gICAgICAgICAgICB2YXIgbGlzdCA9IGdlbkxpc3RQYXJ0cygpLFxuICAgICAgICAgICAgICAgIGFuY2hvclVybCxcbiAgICAgICAgICAgICAgICBhbmNob3JUZXh0O1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBsaXN0LiRpbWdcbiAgICAgICAgICAgICAgICAuYXR0cignc3JjJywgZXZ0LmF2YXRhcilcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8obGlzdC4kbGlzdEl0ZW0pO1xuXG4gICAgICAgICAgICBpZiAoZXZ0LnR5cGUgPT09ICdJc3N1ZXNFdmVudCcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhbmNob3JVcmwgID0gZXZ0LnBheWxvYWQuaXNzdWUuaHRtbF91cmw7XG4gICAgICAgICAgICAgICAgYW5jaG9yVGV4dCA9IGBJc3N1ZSAke2V2dC5wYXlsb2FkLmlzc3VlLm51bWJlcn1gO1xuXG4gICAgICAgICAgICAgICAgbGlzdC4kcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiAke2V2dC5wYXlsb2FkLmFjdGlvbn0gYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChidWlsZEFuY2hvcihhbmNob3JVcmwsIGFuY2hvclRleHQpKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IFwiJHtldnQucGF5bG9hZC5pc3N1ZS50aXRsZX1cImApO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnSXNzdWVDb21tZW50RXZlbnQnKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgYW5jaG9yVXJsICA9IGV2dC5wYXlsb2FkLmNvbW1lbnQuaHRtbF91cmw7XG4gICAgICAgICAgICAgICAgYW5jaG9yVGV4dCA9IGBJc3N1ZSAke2V2dC5wYXlsb2FkLmlzc3VlLm51bWJlcn1gO1xuXG4gICAgICAgICAgICAgICAgbGlzdC4kcGFyYWdyYXBoXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYDxzcGFuIGNsYXNzPVwiYm9sZGVyXCI+JHtldnQuYWN0b3J9PC9zcGFuPiBjb21tZW50ZWQgb24gYClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChidWlsZEFuY2hvcihhbmNob3JVcmwsIGFuY2hvclRleHQpKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGAgb24gJHtmb3JtYXREYXRlKGV2dC5kYXRlKX06IFwiJHtldnQucGF5bG9hZC5jb21tZW50LmJvZHl9XCJgKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgXG4gICAgICAgICAgICBsaXN0LiRsaXN0SXRlbVxuICAgICAgICAgICAgICAgIC5hcHBlbmQobGlzdC4kcGFyYWdyYXBoKVxuICAgICAgICAgICAgICAgIC5hcHBlbmRUbygkbGlzdCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICRsaXN0XG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC1saXN0Jyk7XG5cbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmFwcGVuZChidWlsZENvbHVtbihlcy5sZW5ndGgsIGhlYWRpbmcsICRsaXN0KSk7XG5cbiAgICB9XG5cblxuICAgIC8vIHJlbmRlciBtZXJnZSBldmVudHNcbiAgICBmdW5jdGlvbiByZW5kZXJNZXJnZUV2ZW50cyhlcykge1xuXG4gICAgICAgIC8vIHJlY2VpdmVzIENyZWF0ZUV2ZW50LCBQdWxsUmVxdWVzdEV2ZW50LCBQdWxsUmVxdWVzdFJldmlld0V2ZW50XG4gICAgICAgIC8vICAgYW5kIFB1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudEV2ZW50IGV2ZW50IHR5cGVzXG5cbiAgICAgICAgdmFyIGhlYWRpbmcgPSAnTWVyZ2UtUmVsYXRlZCBFdmVudHMnLFxuICAgICAgICAgICAgJGxpc3QgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKSk7XG5cbiAgICAgICAgZXMuZm9yRWFjaChmdW5jdGlvbiAoZXZ0KSB7XG5cbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGV2dCk7XG5cbiAgICAgICAgICAgIHZhciBsaXN0ID0gZ2VuTGlzdFBhcnRzKCksXG4gICAgICAgICAgICAgICAgYW5jaG9yVXJsLFxuICAgICAgICAgICAgICAgIGFuY2hvclRleHQ7XG5cbiAgICAgICAgICAgIGxpc3QuJGltZy5hdHRyKCdzcmMnLCBldnQuYXZhdGFyKTtcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnQ3JlYXRlRXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICBsaXN0LiRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+IGNyZWF0ZWRgLFxuICAgICAgICAgICAgICAgICAgICAgICAgZXZ0LnBheWxvYWQucmVmX3R5cGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5wYXlsb2FkLnJlZn08L3NwYW4+IG9uYCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcm1hdERhdGUoZXZ0LmRhdGUpXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1B1bGxSZXF1ZXN0RXZlbnQnKSB7XG5cbiAgICAgICAgICAgICAgICAvLyBjb252ZXJ0IGFwaSBVUmwgdG8gaHRtbCBVUkxcbiAgICAgICAgICAgICAgICBhbmNob3JVcmwgPSAoZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0LnVybClcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL1xcL2FwaS4vLCAnXFwvXFwvJykgIC8vIHJlbW92ZSAnYXBpLidcbiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xcL3JlcG9zXFwvLywgJ1xcLycpICAgLy8gcmVtb3ZlICdyZXBvcy8nXG4gICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9wdWxscy8sICdwdWxsJyk7ICAgIC8vIHNpbmd1bGFyICdwdWxsJ1xuXG4gICAgICAgICAgICAgICAgYW5jaG9yVGV4dCA9IGBQdWxsIFJlcXVlc3QgJHtldnQucGF5bG9hZC5wdWxsX3JlcXVlc3QubnVtYmVyfWA7XG5cbiAgICAgICAgICAgICAgICBsaXN0LiRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+YClcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChgICR7ZXZ0LnBheWxvYWQuYWN0aW9ufSBgKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGJ1aWxkQW5jaG9yKGFuY2hvclVybCwgYW5jaG9yVGV4dCkpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYCBvbiAke2Zvcm1hdERhdGUoZXZ0LmRhdGUpfWApO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGV2dC50eXBlID09PSAnUHVsbFJlcXVlc3RSZXZpZXdFdmVudCcpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBhbmNob3JVcmwgID0gZXZ0LnBheWxvYWQucHVsbF9yZXF1ZXN0Lmh0bWxfdXJsO1xuICAgICAgICAgICAgICAgIGFuY2hvclRleHQgPSBldnQucGF5bG9hZC5wdWxsX3JlcXVlc3QudGl0bGU7XG5cbiAgICAgICAgICAgICAgICBsaXN0LiRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQuYWN0b3IsXG4gICAgICAgICAgICAgICAgICAgICAgICBldnQucGF5bG9hZC5hY3Rpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAncmV2aWV3IG9mICdcbiAgICAgICAgICAgICAgICAgICAgXS5qb2luKCcgJykpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoYnVpbGRBbmNob3IoYW5jaG9yVXJsLCBhbmNob3JUZXh0KSlcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZCgnIG9uJyArIGZvcm1hdERhdGUoZXZ0LmRhdGUpKTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChldnQudHlwZSA9PT0gJ1B1bGxSZXF1ZXN0UmV2aWV3Q29tbWVudEV2ZW50Jykge1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIGFuY2hvclVybCAgPSBldnQucGF5bG9hZC5jb21tZW50Lmh0bWxfdXJsO1xuICAgICAgICAgICAgICAgIGFuY2hvclRleHQgPSBldnQucGF5bG9hZC5jb21tZW50LmJvZHk7XG5cbiAgICAgICAgICAgICAgICBsaXN0LiRwYXJhZ3JhcGhcbiAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChbXG4gICAgICAgICAgICAgICAgICAgICAgICBgPHNwYW4gY2xhc3M9XCJib2xkZXJcIj4ke2V2dC5hY3Rvcn08L3NwYW4+YCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLmFjdGlvbixcbiAgICAgICAgICAgICAgICAgICAgICAgICdwdWxsIHJlcXVlc3QgY29tbWVudCAnXG4gICAgICAgICAgICAgICAgICAgIF0uam9pbignICcpKVxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGJ1aWxkQW5jaG9yKGFuY2hvclVybCwgYW5jaG9yVGV4dCkpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQoJyBvbicgKyBmb3JtYXREYXRlKGV2dC5kYXRlKSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbGlzdC4kbGlzdEl0ZW1cbiAgICAgICAgICAgICAgICAuYXBwZW5kKGxpc3QuJGltZylcbiAgICAgICAgICAgICAgICAuYXBwZW5kKGxpc3QuJHBhcmFncmFwaClcbiAgICAgICAgICAgICAgICAuYXBwZW5kVG8oJGxpc3QpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgICRsaXN0XG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NvbC1saXN0Jyk7XG5cbiAgICAgICAgRE9NLiR0YWJsZUNvbnRhaW5lclxuICAgICAgICAgICAgLmFwcGVuZChidWlsZENvbHVtbihlcy5sZW5ndGgsIGhlYWRpbmcsICRsaXN0KSk7XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyBwdWJsaWMgaW5pdCBtZXRob2RcbiAgICBmdW5jdGlvbiBpbml0KCkge1xuICAgICAgICBjYWNoZURvbSgpO1xuICAgIH1cblxuXG4gICAgLy8gcmV0dXJuIHB1YmxpYyBtZXRob2RzXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgcmVuZGVyOiByZW5kZXJcbiAgICB9O1xuXG59KGpRdWVyeSkpO1xuIiwiLyogTm90ZTogdGhlIGNoYXJ0IGlzIE9OTFkgcmVuZGVyZWQgd2hlbiBldmVudHMgb2NjdXIgb24gbW9yZSB0aGFuIDEgZGF5XG4gKiBJZiB0aGV5IGFsbCBvY2N1ciBvbiB0aGUgc2FtZSBkYXksIHRoZSBjaGFydCB3b3VsZCBqdXN0IGJlIDEgcG9pbnQhICovXG5cbi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyBqUXVlcnksIGNvbnNvbGUsIGRvY3VtZW50ICovXG5cbnZhciBSZW5kZXJDaGFydCA9IChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIFxuICAgICAgICAvLyBwbGFjZWhvbGRlciBvYmplY3QgZm9yIGNhY2hlZCBET00gZWxlbWVudHNcbiAgICAgICAgRE9NID0ge30sXG4gICAgICAgIFxuICAgICAgICAvLyBYTUwgbmFtZXNwYWNlIGZvciBTVkcgZWxlbWVudHNcbiAgICAgICAgbnMgID0gJ2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJyxcbiAgICAgICAgXG4gICAgICAgIC8vIGNoYXJ0IGxheW91dCBhdHRyaWJ1dGVzXG4gICAgICAgIHdpZHRoICAgPSAxMDAwLFxuICAgICAgICBoZWlnaHQgID0gNDAwLFxuICAgICAgICB4TWFyZ2luID0gODAsXG4gICAgICAgIHlNYXJnaW4gPSA0MCxcbiAgICAgICAgc3BhY2VyICA9IDQwO1xuICAgICAgICBcblxuICAgIC8vIENhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJGNvbnRhaW5lciA9ICQoJy5jaGFydC1jb250YWluZXInKTtcbiAgICAgICAgRE9NLiRzdmdFbGVtICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3N2ZycpKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogRm9ybWF0IGRhdGVzXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW3N0cmluZ10gICBkYXRlICAgW3N0cmluZyBmb3JtYXR0ZWQgZGF0ZV1cbiAgICAgKiBAcmV0dXJucyAgW3N0cmluZ10gICAgICAgICAgW2Zvcm1hdHRlZCBkYXRlIHN0cmluZ11cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGZvcm1hdERhdGVzKGRhdGUpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBEYXRlKGRhdGUpICAgICAvLyBtYWtlIGRhdGUgb2JqZWN0IGZvciBkYXkgJiBtb250aCBhYmJyZXZcbiAgICAgICAgICAgIC50b0RhdGVTdHJpbmcoKSAgICAgICAvLyBjb252ZXJ0IG9iamVjdCB0byBhIHN0cmluZ1xuICAgICAgICAgICAgLnNsaWNlKDAsIDE1KSAgICAgICAgIC8vIHJlbW92ZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBZWVlZXG4gICAgICAgICAgICAucmVwbGFjZSgvIDAvZywgJyAnKTsgLy8gcmVtb3ZlIGxlYWRpbmcgemVyb3MgKGV4LiAnMDQnID0+ICc0JylcbiAgICB9XG5cblxuICAgIC8vIFRlYWNoIERhdGUgYSBuZXcgbWV0aG9kXG4gICAgRGF0ZS5wcm90b3R5cGUuYWRkRGF5cyA9IGZ1bmN0aW9uKGRheXMpIHtcbiAgICAgICAgdmFyIGRhdCA9IG5ldyBEYXRlKHRoaXMudmFsdWVPZigpKTtcbiAgICAgICAgZGF0LnNldERhdGUoZGF0LmdldERhdGUoKSArIGRheXMpO1xuICAgICAgICByZXR1cm4gZGF0O1xuICAgIH07XG4gICAgXG5cbiAgICAvKiBCdWlsZCBkYXRlIHJhbmdlXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW2FycmF5XSAgIGV2ZW50cyAgIFtzb3J0ZWQgYXJyYXkgb2YgZXZlbnRzXVxuICAgICAqIEByZXR1cm5zICBbYXJyYXldICAgICAgICAgICAgW3JhbmdlIG9mIGRhdGVzIGZyb20gZWFybGllc3QgPiByZWNlbnRdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBidWlsZERhdGVSYW5nZShldmVudHMpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBub3JtRGF0ZXMgICA9IGV2ZW50cy5tYXAoIChlKSA9PiAoZm9ybWF0RGF0ZXMoZS5kYXRlKSkgKSxcbiAgICAgICAgICAgIHN0YXJ0RGF0ZSAgID0gbmV3IERhdGUobm9ybURhdGVzWzBdKSxcbiAgICAgICAgICAgIHN0b3BEYXRlICAgID0gbmV3IERhdGUobm9ybURhdGVzW25vcm1EYXRlcy5sZW5ndGggLSAxXSksXG4gICAgICAgICAgICBkYXRlQXJyYXkgICA9IFtdLFxuICAgICAgICAgICAgY3VycmVudERhdGUgPSBzdGFydERhdGU7XG4gICAgICAgIFxuICAgICAgICB3aGlsZSAoY3VycmVudERhdGUgPD0gc3RvcERhdGUpIHtcbiAgICAgICAgICAgIGRhdGVBcnJheS5wdXNoKCBmb3JtYXREYXRlcyhjdXJyZW50RGF0ZSkgKTtcbiAgICAgICAgICAgIGN1cnJlbnREYXRlID0gY3VycmVudERhdGUuYWRkRGF5cygxKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGZhbmN5IHN0YXRzXG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCc9PT09PT09PT0gREFURSBTUEVDUyA9PT09PT09PT0nKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ0RheXMgaW4gcmFuZ2U6ICcgKyBkYXRlQXJyYXkubGVuZ3RoKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJyAgIFN0YXJ0IGRhdGU6ICcgKyBzdGFydERhdGUpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnICAgIFN0b3AgZGF0ZTogJyArIHN0b3BEYXRlKTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBkYXRlQXJyYXk7XG4gICAgfVxuICAgICAgICBcbiAgICBcbiAgICAvKiBDYWxjdWxhdGUgbWF4IGNoYXJ0IFkgYXhpcyB2YWx1ZVxuICAgICAqIE1heCBZIGlzIG11bHRpcGxlIG9mIDUgdG8gbWFrZSB0aGUgY2hhcnQgbG9vayBuaWNlXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW2FycmF5XSAgIHBvaW50cyAgIFtzb3J0ZWQgZXZlbnRzIGFycmF5XVxuICAgICAqIEByZXR1cm5zICBbbnVtYmVyXSAgICAgICAgICAgW2NhbGN1bGF0ZWQgbWF4IFkgYXhpcyB2YWx1ZV1cbiAgICAqL1xuICAgIGZ1bmN0aW9uIGdldENoYXJ0WU1heChwb2ludHMpIHtcbiAgICAgICAgdmFyIG1heE51bUV2dHMsXG4gICAgICAgICAgICBxdW90aWVudDtcblxuICAgICAgICBtYXhOdW1FdnRzID0gcG9pbnRzLnJlZHVjZShmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWF4KGEsIGJbMV0pO1xuICAgICAgICB9LCBwb2ludHNbMF1bMV0pO1xuXG4gICAgICAgIHF1b3RpZW50ID0gTWF0aC5mbG9vcihtYXhOdW1FdnRzIC8gNCk7XG5cbiAgICAgICAgLy8gcmV0dXJuIDEgbW9yZSB0aGFuIHRoZSBxdW90aWVudCwgKiA1XG4gICAgICAgIHJldHVybiAoKHF1b3RpZW50ICsgMSkgKiA0KTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogUmVmb3JtYXQgZXZlbnRzIGFycmF5IGZvciBjaGFydGluZy5cbiAgICAgKiBBbGwgZXZlbnRzIGFyZSBhbHJlYWR5IHVuaXF1ZSBleGNlcHQgcHVzaCBldmVudHMsIGJlY2F1c2UgdGhleSBjb250YWluXG4gICAgICogYXJyYXlzIG9mIGNvbW1pdHMuIFdlIG1ha2UgZWFjaCBjb21taXQgYSBzZXBhcmF0ZSBlbGVtZW50LiAgVGhlblxuICAgICAqIGdldCBudW0gb2YgZXZlbnRzIGZvciBlYWNoIGRhdGUgKCBzb3J0ZWRBcnIuZmlsdGVyKCkubGVuZ3RoKCkgKS5cbiAgICAgKlxuICAgICAqIEBwYXJhbXMgICBbYXJyYXldICAgZXMgICBbcmF3IGV2ZW50cyBhcnJheV1cbiAgICAgKiBAcmV0dXJucyAgW2FycmF5XSAgICAgICAgW2FycmF5IG9mIGRhdGUgJiBudW1iZXIgb2YgZXZlbnRzXVxuICAgICovXG4gICAgZnVuY3Rpb24gcHJlcGFyZURhdGVFdmVudHMoZXMpIHtcblxuICAgICAgICB2YXIgZXZlbnRzID0gW10sXG4gICAgICAgICAgICBzb3J0ZWRFdmVudHMsXG4gICAgICAgICAgICBkYXRlQXJyYXksXG4gICAgICAgICAgICBjaGFydERhdGEgPSBbXTtcbiAgICAgICAgXG4gICAgICAgIGVzLmZvckVhY2goZnVuY3Rpb24gKGV2dCkge1xuXG4gICAgICAgICAgICAvLyAgY29uc29sZS5sb2coZXZ0KTsgIC8vIGRpYWdcblxuICAgICAgICAgICAgaWYgKGV2dC50eXBlID09PSAnUHVzaEV2ZW50Jykge1xuXG4gICAgICAgICAgICAgICAgLy8gd2hlbiBpdCdzIGEgcHVzaCBldmVudCwgZXh0cmFjdCB0aGUgY29tbWl0c1xuICAgICAgICAgICAgICAgIGV2dC5wYXlsb2FkLmNvbW1pdHMuZm9yRWFjaChmdW5jdGlvbiAoY29tbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBldmVudHMucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBhY3RvcjogZXZ0LmFjdG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXZhdGFyOiBldnQuYXZhdGFyLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0ZTogZXZ0LmRhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYXlsb2FkOiBjb21taXQsXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkNvbW1pdFwiXG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGV2ZW50cy5wdXNoKGV2dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAvLyBzb3J0IGV2ZW50cyBhc2NlbmRpbmdcbiAgICAgICAgc29ydGVkRXZlbnRzID0gZXZlbnRzLnNvcnQoIChhLCBiKSA9PiBuZXcgRGF0ZShhLmRhdGUpIC0gbmV3IERhdGUoYi5kYXRlKSApO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhzb3J0ZWRFdmVudHMpOyAvLyBva1xuICAgICAgICBcbiAgICAgICAgLy8gZ2V0IGFycmF5IG9mIGFsbCBkYXRlcyBpbiByYW5nZVxuICAgICAgICBkYXRlQXJyYXkgPSBidWlsZERhdGVSYW5nZShzb3J0ZWRFdmVudHMpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRlQXJyYXkpO1xuICAgICAgICBcbiAgICAgICAgLy8gYnVpbGQgYXJyYXkgb2YgZGF0YSBwb2ludHM6IFtkYXRlLCAjZXZlbnRzIHBlciBkYXRlXVxuICAgICAgICBjaGFydERhdGEgPSBkYXRlQXJyYXkubWFwKGZ1bmN0aW9uIChkYXRlKSB7XG4gICAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIHRoZSBkYXRlLCBhcyBNb250aCBhbmQgRGF5XG4gICAgICAgICAgICAgICAgZGF0ZS5zbGljZSgzLCAxMCksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gbnVtYmVyIG9mIGV2ZW50cyBwZXIgZGF0ZVxuICAgICAgICAgICAgICAgIHNvcnRlZEV2ZW50cy5maWx0ZXIoICh4KSA9PiBmb3JtYXREYXRlcyh4LmRhdGUpID09PSBkYXRlICkubGVuZ3RoXG4gICAgICAgICAgICBdOyAgICAgICAgICAgIFxuICAgICAgICB9KTtcbiAgICAgICAgXG4gICAgICAgIHJldHVybiBjaGFydERhdGE7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGNoZWNrIGlmIGFsbCBldmVudHMgb2NjdXIgb24gdGhlIHNhbWUgZGF5XG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW2FycmF5XSAgIHBvaW50c0FyciAgIFtldmVudHMgY29vcmRpbmF0ZSBkYXRhIHBvaW50c11cbiAgICAgKiBAcmV1dHJucyAgW2Jvb2xlYW5dICAgICAgICAgICAgIFtyZXQgdHJ1ZSBpZiBhbGwgZXZlbnRzIG9uIDEgZGF5XVxuICAgICovXG4gICAgZnVuY3Rpb24gc2FtZURhbW5EYXkocG9pbnRzQXJyKSB7XG4gICAgICAgIHJldHVybiBwb2ludHNBcnIubGVuZ3RoID09PSAxO1xuICAgIH1cbiAgICBcbiAgICAvKiBnZW5lcmF0ZSBmb3JtYXR0ZWQgcG9pbnRzIGFycmF5XG4gICAgICpcbiAgICAgKiBAcGFyYW1zICAgW2FycmF5XSAgICBwb2ludHMgICAgICBbYXJyYXkgb2YgY29vcmRpbmF0ZSBwb2ludHNdXG4gICAgICogQHBhcmFtcyAgIFtudW1iZXJdICAgeE11bHRpcGxlICAgW211bHRpcGxpZXIgdG8gc2NhbGUgY29vcmRzXVxuICAgICAqIEBwYXJhbXMgICBbbnVtYmVyXSAgIHlNdWx0aXBsZSAgIFttdWx0aXBsaWVyIHRvIHNjYWxlIGNvb3Jkc11cbiAgICAgKiBAcmV0dXJucyAgW2FycmF5XSAgIFxuICAgICovXG4gICAgZnVuY3Rpb24gZ2VuRm9ybWF0dGVkUG9pbnRzKHBvaW50cywgeE11bHRpcGxlLCB5TXVsdGlwbGUpIHtcbiAgICAgICAgcmV0dXJuIHBvaW50cy5tYXAoZnVuY3Rpb24ocG9pbnQsIGluZCkge1xuICAgICAgICAgICAgcmV0dXJuIFtcbiAgICAgICAgICAgICAgICAoaW5kICogeE11bHRpcGxlKSArIHhNYXJnaW4sXG4gICAgICAgICAgICAgICAgKGhlaWdodCAtIChwb2ludFsxXSAqIHlNdWx0aXBsZSkpIC0geU1hcmdpblxuICAgICAgICAgICAgXTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGdlbmVyYXRlIGNoYXJ0IHBvaW50c1xuICAgICAqXG4gICAgICogQHBhcmFtcyAgW2FycmF5XSAgICBwb2ludHMgIFthcnJheSBvZiBjb29yZGluYXRlIHBvaW50c11cbiAgICAgKiBAcmV0dXJucyBbb2JqZWN0XSAgICAgICAgICAgWzxnPnJvdXAgb2YgPGNpcmNsZT4gZWxlbWVudHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZW5lcmF0ZUNpcmNsZXMocG9pbnRzKSB7XG5cbiAgICAgICAgLy8gaW5pdCB2YXJzXG4gICAgICAgIHZhciBncm91cCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnZycpKSxcbiAgICAgICAgICAgIGN1cnJlbnRQb2ludCxcbiAgICAgICAgICAgIG51bVBvaW50cyA9IHBvaW50cy5sZW5ndGggLSAxLFxuICAgICAgICAgICAgY2hhcnRZTWF4ID0gZ2V0Q2hhcnRZTWF4KHBvaW50cyksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIG11bHRpcGxpZXJzIHNjYWxlIHRoZSBvdXRwdXQgeCAmIHkgY29vcmRzXG4gICAgICAgICAgICB4TXVsdGlwbGUgPSAod2lkdGggLSB4TWFyZ2luIC0gc3BhY2VyKSAvIG51bVBvaW50cyxcbiAgICAgICAgICAgIHlNdWx0aXBsZSA9IChoZWlnaHQgLSB5TWFyZ2luIC0gc3BhY2VyKSAvIGNoYXJ0WU1heCxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZm9ybWF0IHZhbHVlcyB0byBhbGlnbiB3aXRoIGNoYXJ0IGV4dGVudHNcbiAgICAgICAgICAgIGZvcm1hdHRlZFBvaW50cyA9IGdlbkZvcm1hdHRlZFBvaW50cyhwb2ludHMsIHhNdWx0aXBsZSwgeU11bHRpcGxlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBwb2ludHMgYXJyYXkgYXBwZW5kaW5nIGNpcmNsZXMgdG8gZ3JvdXBcbiAgICAgICAgZm9ybWF0dGVkUG9pbnRzLmZvckVhY2goZnVuY3Rpb24gKHBvaW50LCBpbmQpIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgdmFyIGNpcmNsZSA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnY2lyY2xlJykpLFxuICAgICAgICAgICAgICAgIHRpdGxlICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAndGl0bGUnKSksXG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gPGNpcmNsZT4gd2FudHMgYXR0cnM6IGN4LCBjeSwgclxuICAgICAgICAgICAgICAgIGN4ID0gcG9pbnRbMF0sXG4gICAgICAgICAgICAgICAgY3kgPSBwb2ludFsxXSxcbiAgICAgICAgICAgICAgICByICA9IDQ7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGNpcmNsZVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeCcsIGN4KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjeScsIGN5KVxuICAgICAgICAgICAgICAgIC5hdHRyKCdyJywgcik7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIDx0aXRsZT4gYWRkcyAndG9vbCB0aXAnIG9uIGhvdmVyXG4gICAgICAgICAgICB0aXRsZS50ZXh0KHBvaW50c1tpbmRdWzBdICsgJyAoJyArIHBvaW50c1tpbmRdWzFdICsgJyBldmVudHMpJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCB0aXRsZSB0byBjaXJjbGVcbiAgICAgICAgICAgIGNpcmNsZS5hcHBlbmQodGl0bGUpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBhcHBlbmQgY2lyY2xlIHRvIGdyb3VwXG4gICAgICAgICAgICBncm91cFxuICAgICAgICAgICAgICAgIC5hZGRDbGFzcygnY2hhcnQtY2lyY2xlJylcbiAgICAgICAgICAgICAgICAuYXBwZW5kKGNpcmNsZSk7IFxuXG4gICAgICAgIH0pO1xuICAgIFxuICAgIHJldHVybiBncm91cDtcbiAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLyogZ2VuZXJhdGUgY2hhcnQgbGluZVxuICAgICAqXG4gICAgICogQHBhcmFtcyAgW2FycmF5XSAgICBwb2ludHMgIFthcnJheSBvZiBjb29yZGluYXRlIHBvaW50c11cbiAgICAgKiBAcmV0dXJucyBbb2JqZWN0XSAgICAgICAgICAgWzxnPnJvdXAgb2YgPGxpbmU+IHNlZ21lbnRzXVxuICAgICovXG4gICAgZnVuY3Rpb24gZ2VuZXJhdGVMaW5lcyhwb2ludHMpIHtcbiAgICAgICAgXG4gICAgICAgIC8vIGluaXQgdmFyc1xuICAgICAgICB2YXIgZ3JvdXAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ2cnKSksXG4gICAgICAgICAgICBjdXJyZW50UG9pbnQsXG4gICAgICAgICAgICBpLFxuICAgICAgICAgICAgbGluZSxcbiAgICAgICAgICAgIG51bVBvaW50cyA9IHBvaW50cy5sZW5ndGggLSAxLFxuICAgICAgICAgICAgY2hhcnRZTWF4ID0gZ2V0Q2hhcnRZTWF4KHBvaW50cyksXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIG11bHRpcGxpZXJzIHNjYWxlIHRoZSBvdXRwdXQgeCAmIHkgY29vcmRzXG4gICAgICAgICAgICB4TXVsdGlwbGUgPSAod2lkdGggLSB4TWFyZ2luIC0gc3BhY2VyKSAvIG51bVBvaW50cyxcbiAgICAgICAgICAgIHlNdWx0aXBsZSA9IChoZWlnaHQgLSB5TWFyZ2luIC0gc3BhY2VyKSAvIGNoYXJ0WU1heCxcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZm9ybWF0IHZhbHVlcyB0byBhbGlnbiB3aXRoIGNoYXJ0IGV4dGVudHNcbiAgICAgICAgICAgIGZvcm1hdHRlZFBvaW50cyA9IGdlbkZvcm1hdHRlZFBvaW50cyhwb2ludHMsIHhNdWx0aXBsZSwgeU11bHRpcGxlKTtcbiAgICAgICAgXG4gICAgICAgIC8vIGxvb3AgdGhyb3VnaCBwb2ludHMgYXJyYXkgYXBwZW5kaW5nIGxpbmVzIHRvIGdyb3VwXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBmb3JtYXR0ZWRQb2ludHMubGVuZ3RoIC0gMTsgaSArPSAxKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGxpbmUgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ2xpbmUnKSk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGRlc2NyaWJlIDxsaW5lPlxuICAgICAgICAgICAgbGluZVxuICAgICAgICAgICAgICAgIC5hdHRyKCd4MScsIGZvcm1hdHRlZFBvaW50c1tpXVswXSlcbiAgICAgICAgICAgICAgICAuYXR0cigneTEnLCBmb3JtYXR0ZWRQb2ludHNbaV1bMV0pXG4gICAgICAgICAgICAgICAgLmF0dHIoJ3gyJywgZm9ybWF0dGVkUG9pbnRzW2kgKyAxXVswXSlcbiAgICAgICAgICAgICAgICAuYXR0cigneTInLCBmb3JtYXR0ZWRQb2ludHNbaSArIDFdWzFdKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCA8bGluZT4gdG8gPGc+cm91cFxuICAgICAgICAgICAgZ3JvdXBcbiAgICAgICAgICAgICAgICAuYWRkQ2xhc3MoJ2NoYXJ0LWxpbmUnKVxuICAgICAgICAgICAgICAgIC5hcHBlbmQobGluZSk7XG4gICAgICAgIH1cbiAgICBcbiAgICByZXR1cm4gZ3JvdXA7XG4gICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8qIGdlbmVyYXRlIGF4aXMgbGFiZWxzXG4gICAgICpcbiAgICAgKiBAcGFyYW1zICBbYXJyYXldICAgIHBvaW50cyAgW2FycmF5IG9mIGNvb3JkaW5hdGUgcG9pbnRzXVxuICAgICAqIEBwYXJhbXMgIFtzdHJpbmddICAgYXhpcyAgICBbJ3knIG9yICd4JyBzcGVjaWZpZXMgY29uZGl0aW9uYWwgcGF0aF1cbiAgICAgKiBAcmV0dXJucyBbb2JqZWN0XSAgICAgICAgICAgWzxnPnJvdXAgb2YgYXhpcyA8bGluZT4gYW5kIDx0ZXh0PiBlbHNdXG4gICAgKi9cbiAgICBmdW5jdGlvbiBnZW5BeGlzTGFiZWxzKHBvaW50cywgYXhpcykge1xuICAgICAgICBcbiAgICAgICAgdmFyIGdyb3VwID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnMsICdnJykpLFxuICAgICAgICAgICAgbGluZSwgLy8gcGxhY2Vob2xkZXIgZm9yIDxsaW5lPiBlbGVtZW50IGJ1aWx0IGluIGxvb3BcbiAgICAgICAgICAgIHRleHQsIC8vIHBsYWNlaG9sZGVyIGZvciA8dGV4dD4gZWxlbWVudCBidWlsdCBpbiBsb29wXG4gICAgICAgICAgICBudW1BeGlzVGlja3MsXG4gICAgICAgICAgICB4UG9zLCB4VmFsdWUsIHhNdWx0aXBsZSxcbiAgICAgICAgICAgIHlQb3MsIHlWYWx1ZSwgeVNwYWNpbmcsXG4gICAgICAgICAgICBjaGFydFlNYXggPSBnZXRDaGFydFlNYXgocG9pbnRzKSxcbiAgICAgICAgICAgIGk7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25kaXRpb25hbGx5IGhhbmRsZSBwYXNzZWQgYXhpcyBwYXJhbVxuICAgICAgICBpZiAoYXhpcyA9PT0gJ3knKSB7XG4gICAgICAgICAgICAvLyBhZGQgQ1NTIGNsYXNzIHRvIDxnPiBlbGVtZW50XG4gICAgICAgICAgICBncm91cC5hZGRDbGFzcygnbGFiZWxzIHktbGFiZWxzJyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGxpbWl0IHF0eSBvZiBZIGF4aXMgbGFiZWxzIGJhc2VkIG9uIGNoYXJ0WU1heFxuICAgICAgICAgICAgbnVtQXhpc1RpY2tzID0gKGNoYXJ0WU1heCA+IDEyKSA/IGNoYXJ0WU1heCAvIDQgOiBjaGFydFlNYXg7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSByZWxhdGl2ZSBzcGFjZSBiZXR3ZWVuIGVhY2ggWSBheGlzIGxhYmVsXG4gICAgICAgICAgICB5U3BhY2luZyA9IChoZWlnaHQgLSB5TWFyZ2luIC0gc3BhY2VyKSAvIG51bUF4aXNUaWNrcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIG51bUF4aXNUaWNrcywgZ2VuZXJhdGUgPGxpbmU+IGFuZCA8dGV4dD4gZWxlbWVudHMsXG4gICAgICAgICAgICAvLyB0aGVuIGFwcGVuZCBlYWNoIG9mIHRoZW0gdG8gb3VyIDxnPnJvdXBcbiAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1BeGlzVGlja3MgKyAxOyBpICs9IDEpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBheGlzIGxhYmVsIHZhbHVlXG4gICAgICAgICAgICAgICAgeVZhbHVlID0gaSAqIGNoYXJ0WU1heCAvIG51bUF4aXNUaWNrcztcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBheGlzIGxhYmVsIHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgeVBvcyA9IGhlaWdodCAtIHlNYXJnaW4gLSAoeVNwYWNpbmcgKiBpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjcmVhdGUgbmV3IDxsaW5lPiBlbGVtZW50XG4gICAgICAgICAgICAgICAgbGluZSA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAnbGluZScpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBhZGQgYXR0cmlidXRlcyB0byA8bGluZT4gZWxlbWVudFxuICAgICAgICAgICAgICAgIGxpbmUuYWRkQ2xhc3MoJ2hvcml6LXJ1bGUnKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneDEnLCB4TWFyZ2luKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneTEnLCB5UG9zKVxuICAgICAgICAgICAgICAgICAgICAuYXR0cigneDInLCAod2lkdGggLSBzcGFjZXIgKyA1KSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3kyJywgeVBvcyk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gY3JlYXRlIG5ldyA8dGV4dD4gZWxlbWVudFxuICAgICAgICAgICAgICAgIHRleHQgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhucywgJ3RleHQnKSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gYWRkIGF0dHJpYnV0ZXMgdG8gPHRleHQ+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHhNYXJnaW4gLSAyMCkpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd5JywgKHlQb3MgKyA0KSlcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoeVZhbHVlKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICBncm91cFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKGxpbmUpXG4gICAgICAgICAgICAgICAgICAgIC5hcHBlbmQodGV4dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gZ3JvdXA7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2UgaWYgKGF4aXMgPT09ICd4JyB8fCAhYXhpcyB8fCBheGlzID09PSBudWxsKSB7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFkZCBDU1MgY2xhc3MgdG8gdGhlIDxnPnJvdXBcbiAgICAgICAgICAgIGdyb3VwLmFkZENsYXNzKCdsYWJlbHMgeC1sYWJlbHMnKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbnVtQXhpc1RpY2tzID0gcG9pbnRzLmxlbmd0aCAtIDE7XG4gICAgICAgICAgICB4TXVsdGlwbGUgPSAod2lkdGggLSB4TWFyZ2luIC0gc3BhY2VyKSAvIG51bUF4aXNUaWNrcztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIHBvaW50cywgZ2VuZXJhdGUgPGxpbmU+IGFuZCA8dGV4dD4gZWxlbWVudHMsXG4gICAgICAgICAgICAvLyBhbmQgYXBwZW5kIGVhY2ggb2YgdGhlbSB0byBvdXIgPGc+IGdyb3VwXG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgdGV4dCA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKG5zLCAndGV4dCcpKTtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBjYWxjdWxhdGUgeSBheGlzIGxhYmVsIHZhbHVlc1xuICAgICAgICAgICAgICAgIHhWYWx1ZSA9IHBvaW50c1tpXVswXTtcblxuICAgICAgICAgICAgICAgIC8vIGNhbGN1bGF0ZSB5IHBvc2l0aW9uXG4gICAgICAgICAgICAgICAgeFBvcyA9IGkgKiB4TXVsdGlwbGU7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gYWRkIGF0dHJpYnV0ZXMgdG8gPHRleHQ+IGVsZW1lbnRcbiAgICAgICAgICAgICAgICB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCd4JywgKHhQb3MgKyB4TWFyZ2luKSlcbiAgICAgICAgICAgICAgICAgICAgLmF0dHIoJ3knLCAoaGVpZ2h0IC0gNSkpXG4gICAgICAgICAgICAgICAgICAgIC50ZXh0KHhWYWx1ZSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gZm9yIGxhcmdlIGRhdGFzZXRzLCBvbmx5IGFwcGVuZCBldmVyeSAxMHRoIGRhdGVcbiAgICAgICAgICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCA+IDIwKSB7XG4gICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCB8fCBpICUgMTAgPT09IDAgfHwgaSA9PT0gKHBvaW50cy5sZW5ndGggLSAxKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC5hcHBlbmRUbyhncm91cCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcblxuICAgICAgICAgICAgICAgICAgICB0ZXh0LmFwcGVuZFRvKGdyb3VwKTtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHhWYWx1ZSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBncm91cDtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICB9XG5cbiAgICBcbiAgICAvLyBNQUlOIFJFTkRFUkVSXG4gICAgLy8gUmVjZWl2ZXMgQUxMIGV2ZW50cyBmcm9tICdnZXQtZXZlbnRzLmpzJ1xuICAgIGZ1bmN0aW9uIHJlbmRlcihldmVudHMpIHtcbiAgICAgICAgXG4gICAgICAgIHZhciBwb2ludHM7XG4gICAgICAgIFxuICAgICAgICAvLyBlbXB0eSBwYXJlbnQgU1ZHIGVsZW1lbnQgYmVmb3JlIGVhY2ggcmVuZGVyXG4gICAgICAgIERPTS4kc3ZnRWxlbS5lbXB0eSgpO1xuICAgICAgICBcbiAgICAgICAgXG4gICAgICAgIC8vIGFkZCBDU1MgY2xhc3MsIG5hbWVzcGFjZSBhbmQgYXR0cmlidXRlcyB0byBtYWluIDxzdmc+IGVsZW1lbnRcbiAgICAgICAgRE9NLiRzdmdFbGVtXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ2NoYXJ0LS1jb250ZW50JylcbiAgICAgICAgICAgIC5hdHRyKCdpZCcsICdzdmcnKVxuICAgICAgICAgICAgLmF0dHIoJ3htbG5zJywgbnMpXG4gICAgICAgICAgICAvLyAuYXR0cignd2lkdGgnLCAnMTAwJScpXG4gICAgICAgICAgICAuYXR0cignaGVpZ2h0JywgJzEwMCUnKVxuICAgICAgICAgICAgLmF0dHIoJ3ZpZXdCb3gnLCAnMCAwICcgKyB3aWR0aCArICcgJyArIGhlaWdodClcbiAgICAgICAgICAgIC5hdHRyKCd4bWw6c3BhY2UnLCAncHJlc2VydmUnKTtcbiAgICAgICAgXG4gICAgICAgIGlmIChldmVudHMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmb3JtYXQgZXZlbnRzIHRvIHVzYWJsZSBwb2ludHNcbiAgICAgICAgICAgIHBvaW50cyA9IHByZXBhcmVEYXRlRXZlbnRzKGV2ZW50cyk7XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIEFMTCBldmVudHMgb2NjdXIgb24gdGhlIHNhbWUgZGF5IVxuICAgICAgICAgICAgaWYgKHNhbWVEYW1uRGF5KHBvaW50cykpIHtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIGFwcGVuZCBheGlzIGxhYmVsIDx0ZXh0PiA8Zz5yb3Vwc1xuICAgICAgICAgICAgRE9NLiRzdmdFbGVtXG4gICAgICAgICAgICAgICAgLmFwcGVuZChnZW5BeGlzTGFiZWxzKHBvaW50cywgJ3knKSlcbiAgICAgICAgICAgICAgICAuYXBwZW5kKGdlbkF4aXNMYWJlbHMocG9pbnRzLCAneCcpKTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gYXBwZW5kIGxpbmVcbiAgICAgICAgICAgIERPTS4kc3ZnRWxlbVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoZ2VuZXJhdGVMaW5lcyhwb2ludHMpKTtcblxuICAgICAgICAgICAgLy8gYXBwZW5kIHBvaW50cy9jaXJjbGVzIDxnPnJvdXBcbiAgICAgICAgICAgIERPTS4kc3ZnRWxlbVxuICAgICAgICAgICAgICAgIC5hcHBlbmQoZ2VuZXJhdGVDaXJjbGVzKHBvaW50cykpO1xuXG4gICAgICAgICAgICAvLyBhcHBlbmQgU1ZHIHRvIGNvbnRhaW5lclxuICAgICAgICAgICAgRE9NLiRjb250YWluZXJcbiAgICAgICAgICAgICAgICAuYXBwZW5kKERPTS4kc3ZnRWxlbSk7XG4gICAgICAgICAgICBcbiAgICAgICAgfSAgICAgICAgXG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgfVxuXG5cbiAgICAvLyByZXR1cm4gcHVibGljIG1ldGhvZHNcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0LFxuICAgICAgICByZW5kZXI6IHJlbmRlclxuICAgIH07XG5cbn0oalF1ZXJ5KSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgalF1ZXJ5LCBkb2N1bWVudCwgY29uc29sZSwgTFMsIEhpdEFwaSAqL1xuXG52YXIgUmVwb1NlbGVjdCA9IChmdW5jdGlvbiAoJCkge1xuXG4gICAgdmFyIERPTSAgID0ge30sXG4gICAgICAgIHJlcG9zID0gW10sXG4gICAgICAgIHNlbGVjdGVkUmVwbztcbiAgICBcbiAgICBcbiAgICAvLyB1dGlsIGNoZWNrcyBsb2NhbCBzdG9yYWdlIGZvciBwcmV2aW91c2x5IHNhdmVkIGxpc3Qgb2YgcmVwb3NcbiAgICB2YXIgY2hlY2tTdG9yYWdlID0gKGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gTFMuZ2V0RGF0YSgnZGV2LWRhc2gtcmVwb3MnKSA/IHRydWUgOiBmYWxzZTtcbiAgICB9KCkpO1xuXG5cbiAgICAvLyBjYWNoZSBET00gZWxlbWVudHNcbiAgICBmdW5jdGlvbiBjYWNoZURvbSgpIHtcbiAgICAgICAgRE9NLiRzZWxlY3RDb250YWluZXIgPSAkKCcucmVwby1zZWxlY3QnKTtcbiAgICAgICAgRE9NLiRwICAgICAgICAgICAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKSk7XG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lciAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKSk7XG4gICAgICAgIERPTS4kdWwgICAgICAgICAgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd1bCcpKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvRm9ybSAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2Zvcm0nKSk7XG4gICAgICAgIERPTS4kbmV3UmVwb1VzZXIgICAgID0gJChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbnB1dCcpKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvUmVwbyAgICAgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykpO1xuICAgICAgICBET00uJG5ld1JlcG9CdG4gICAgICA9ICQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJykpO1xuICAgIH1cblxuXG4gICAgLy8gYmluZCBldmVudHNcbiAgICBmdW5jdGlvbiBiaW5kRXZlbnRzKCkge1xuICAgICAgICBET00uJHNlbGVjdENvbnRhaW5lci5vbignY2xpY2snLCAnLnJlcG8tc2VsZWN0LWhpZ2hsaWdodCcsIHNob3dSZXBvTGlzdCk7XG4gICAgICAgIERPTS4kdWwub24oJ2NsaWNrJywgJ2Rpdi5saS1kZXNjcmlwdGlvbnMnLCBzZWxlY3RSZXBvKTtcbiAgICAgICAgRE9NLiR1bC5vbignY2xpY2snLCAnc3Bhbi5saS1yZW1vdmUnLCBkZWxldGVSZXBvKTtcbiAgICAgICAgRE9NLiRuZXdSZXBvRm9ybS5vbignc3VibWl0JywgYWRkUmVwbyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHNob3cvaGlkZSByZXBvIGxpc3RcbiAgICBmdW5jdGlvbiBzaG93UmVwb0xpc3QoZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIERPTS4kbGlzdENvbnRhaW5lclxuICAgICAgICAgICAgLnRvZ2dsZUNsYXNzKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gc2VsZWN0IGEgcmVwbyB0byB2aWV3XG4gICAgZnVuY3Rpb24gc2VsZWN0UmVwbyhlKSB7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgcGlja2VkID0gZS5jdXJyZW50VGFyZ2V0LmNoaWxkcmVuWzBdLmlubmVySFRNTC5zcGxpdCgnIC8gJyk7XG4gICAgICAgIFxuICAgICAgICBzZWxlY3RlZFJlcG8gPSBwaWNrZWRbMV07XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZyhwaWNrZWQpOyAvLyBkaWFnXG4gICAgICAgIHBvcHVsYXRlTWVudShyZXBvcyk7XG4gICAgICAgICAgICBcbiAgICAgICAgLy8gQ2FsbCBIaXRBcGkgbW9kdWxlJ3MgcHVibGljIC5nZXRFdmVudHMoKSBtZXRob2RcbiAgICAgICAgSGl0QXBpLmdldEV2ZW50cyhwaWNrZWRbMF0sIHBpY2tlZFsxXSk7XG4gICAgICAgIFxuICAgICAgICAvLyByZXRyYWN0IHJlcG8gbGlzdFxuICAgICAgICBET00uJGxpc3RDb250YWluZXJcbiAgICAgICAgICAgIC5hZGRDbGFzcygnaGlkZGVuJyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGRlbGV0ZSByZXBvIGZyb20gdGhlIGxpc3RcbiAgICBmdW5jdGlvbiBkZWxldGVSZXBvKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgXG4gICAgICAgIHZhciBhdXRob3JBbmRSZXBvICAgPSBlLnRhcmdldC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nLmRhdGFzZXQucmVwbyxcbiAgICAgICAgICAgIHNlbGVjdGVkRWxlbWVudCA9ICQoZS50YXJnZXQpLnBhcmVudCgpLFxuICAgICAgICAgICAgc2VsZWN0ZWRFbGVtSWQgID0gc2VsZWN0ZWRFbGVtZW50LmF0dHIoJ2lkJyk7XG4gICAgICAgIFxuICAgICAgICAvLyBjb25zb2xlLmxvZygnRGVsZXRlOiAnICsgYXV0aG9yQW5kUmVwbyk7IC8vIGRpYWdcbiAgICAgICAgXG4gICAgICAgIHJlcG9zLnNwbGljZShzZWxlY3RlZEVsZW1JZCwgMSk7XG4gICAgICAgIHNlbGVjdGVkRWxlbWVudC5yZW1vdmUoKTtcbiAgICAgICAgTFMuc2V0RGF0YSgnZGV2LWRhc2gtcmVwb3MnLCByZXBvcyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIGFkZCByZXBvIHRvIHRoZSBsaXN0XG4gICAgZnVuY3Rpb24gYWRkUmVwbyhlKSB7XG4gICAgICAgIFxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIFxuICAgICAgICB2YXIgYXBpVXJsICAgID0gJ2h0dHBzOi8vYXBpLmdpdGh1Yi5jb20vcmVwb3MnLFxuICAgICAgICAgICAgbmV3QXV0aG9yID0gZS5jdXJyZW50VGFyZ2V0WzBdLnZhbHVlLFxuICAgICAgICAgICAgbmV3UmVwbyAgID0gZS5jdXJyZW50VGFyZ2V0WzFdLnZhbHVlO1xuICAgICAgICBcbiAgICAgICAgJC5nZXRKU09OKGAke2FwaVVybH0vJHtuZXdBdXRob3J9LyR7bmV3UmVwb31gKVxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcG8pIHtcbiAgICAgICAgICAgICAgICByZXBvcy51bnNoaWZ0KHJlcG8pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgLy8gY2xlYXIgaW5wdXRzXG4gICAgICAgICAgICAgICAgRE9NLiRuZXdSZXBvVXNlclswXS52YWx1ZSA9ICcnO1xuICAgICAgICAgICAgICAgIERPTS4kbmV3UmVwb1JlcG9bMF0udmFsdWUgPSAnJztcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIHJldHVybiByZXBvcztcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihzYXZlUmVwb3MpXG4gICAgICAgICAgICAudGhlbihwb3B1bGF0ZU1lbnUpXG4gICAgICAgICAgICAuY2F0Y2goZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgZmV0Y2hpbmcgcmVwby4nKTtcbiAgICAgICAgICAgIH0pO1xuICAgIFxuICAgICAgICBcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcG9wdWxhdGUgbW9kdWxlIHNjb3BlIHJlcG9zIGFycmF5ICYgY2FsbCBIaXRBcGkgb24gMXN0IGxvYWRcbiAgICBmdW5jdGlvbiBwb3B1bGF0ZVJlcG9zKGRhdGEpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChkYXRhICYmIGRhdGEubGVuZ3RoKSB7XG5cbiAgICAgICAgXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHJlcG8pIHtcbiAgICAgICAgICAgICAgICByZXBvcy5wdXNoKHJlcG8pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIGNhcHR1cmUgMXN0IHJlcG8ncyBhdXRob3IgJiByZXBvIG5hbWUgaW4gYW4gYXJyYXlcbiAgICAgICAgICAgIHZhciByZXBvWmVybyA9IHJlcG9zWzBdLmZ1bGxfbmFtZS5zcGxpdCgnLycpO1xuXG4gICAgICAgICAgICAvLyBzZXQgc2VsZWN0ZWQgcmVwbyB0byBmaXJzdCByZXBvJ3MgbmFtZVxuICAgICAgICAgICAgc2VsZWN0ZWRSZXBvID0gcmVwb1plcm9bMV07XG5cbiAgICAgICAgICAgIC8vIENhbGwgSGl0QXBpIG1vZHVsZSdzIHB1YmxpYyAuZ2V0RXZlbnRzKCkgbWV0aG9kXG4gICAgICAgICAgICBIaXRBcGkuZ2V0RXZlbnRzKHJlcG9aZXJvWzBdLCByZXBvWmVyb1sxXSk7XG5cbiAgICAgICAgICAgIHJldHVybiBkYXRhO1xuICAgICAgICB9XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIHNhdmUgcmVwb3MgdG8gbG9jYWwgc3RvcmFnZVxuICAgIGZ1bmN0aW9uIHNhdmVSZXBvcyhkYXRhKSB7XG4gICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLXJlcG9zJywgcmVwb3MpO1xuICAgICAgICByZXR1cm4gZGF0YTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcG9wdWxhdGUgcmVwbyBsaXN0IG1lbnVcbiAgICBmdW5jdGlvbiBwb3B1bGF0ZU1lbnUoZGF0YSkge1xuICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZGF0YSAmJiBkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBET00uJHVsLmh0bWwoJycpO1xuXG4gICAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKHJlcG8sIGluZCkge1xuICAgICAgICAgICAgICAgIHZhciAkbGkgPSAkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2xpJykpO1xuXG4gICAgICAgICAgICAgICAgJGxpXG4gICAgICAgICAgICAgICAgICAgIC5hdHRyKCdpZCcsIGluZClcbiAgICAgICAgICAgICAgICAgICAgLmh0bWwoYDxkaXYgY2xhc3M9XCJsaS1kZXNjcmlwdGlvbnNcIiBkYXRhLXJlcG89XCIke3JlcG8ubmFtZX1cIj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtyZXBvLm93bmVyLmxvZ2lufSAvICR7cmVwby5uYW1lfTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+JHtyZXBvLmRlc2NyaXB0aW9ufTwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3M9XCJsaS1yZW1vdmVcIj4mIzEwMDYwPC9zcGFuPmApO1xuXG4gICAgICAgICAgICAgICAgRE9NLiR1bFxuICAgICAgICAgICAgICAgICAgICAuYXBwZW5kKCRsaSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgcmVuZGVyKCk7XG4gICAgICAgIFxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ25vIHJlcG9zLCBob2xtZXMnKTtcbiAgICAgICAgICAgIHJlbmRlcigpO1xuICAgICAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyXG4gICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZW5kZXJcbiAgICBmdW5jdGlvbiByZW5kZXIoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBcbiAgICAgICAgRE9NLiRuZXdSZXBvQnRuXG4gICAgICAgICAgICAuaHRtbCgnKycpO1xuXG4gICAgICAgIERPTS4kbmV3UmVwb1VzZXJcbiAgICAgICAgICAgIC5hdHRyKCdyZXF1aXJlZCcsICd0cnVlJylcbiAgICAgICAgICAgIC5hdHRyKCdwbGFjZWhvbGRlcicsICdhdXRob3InKTtcblxuICAgICAgICBET00uJG5ld1JlcG9SZXBvXG4gICAgICAgICAgICAuYXR0cigncmVxdWlyZWQnLCAndHJ1ZScpXG4gICAgICAgICAgICAuYXR0cigncGxhY2Vob2xkZXInLCAncmVwbycpO1xuXG4gICAgICAgIERPTS4kbmV3UmVwb0Zvcm1cbiAgICAgICAgICAgIC5hZGRDbGFzcygnbmV3LXJlcG8tZm9ybScpXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbmV3UmVwb1VzZXIpXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbmV3UmVwb1JlcG8pXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbmV3UmVwb0J0bik7XG5cbiAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyXG4gICAgICAgICAgICAuYWRkQ2xhc3MoJ3JlcG8tbGlzdCcpXG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiR1bClcbiAgICAgICAgICAgIC5hcHBlbmQoRE9NLiRuZXdSZXBvRm9ybSk7XG4gICAgICAgIFxuICAgICAgICBET00uJHBcbiAgICAgICAgICAgIC5odG1sKGBZb3UgYXJlIGN1cnJlbnRseSB2aWV3aW5nIHRoZSA8c3BhbiBjbGFzcz1cInJlcG8tc2VsZWN0LWhpZ2hsaWdodFwiPiR7c2VsZWN0ZWRSZXBvfSYjeDI1QkM7PC9zcGFuPiByZXBvc2l0b3J5LmApO1xuICAgICAgICAgICAgICAgIFxuICAgICAgICBET00uJHNlbGVjdENvbnRhaW5lclxuICAgICAgICAgICAgLmFwcGVuZChET00uJHApXG4gICAgICAgICAgICAuYXBwZW5kKERPTS4kbGlzdENvbnRhaW5lcik7XG5cbiAgICB9XG5cblxuICAgIC8vIHB1YmxpYyBtZXRob2QgdG8ga2ljayBvZiB0aGUgd2hvbGUgbW9kdWxlXG4gICAgZnVuY3Rpb24gZ2V0UmVwb3ModXNlck5hbWUpIHtcbiAgICAgICAgXG4gICAgICAgIGlmIChjaGVja1N0b3JhZ2UpIHtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdVc2luZyBsb2NhbCBzdG9yYWdlJyk7IC8vIGRpYWdcbiAgICAgICAgICAgIHBvcHVsYXRlUmVwb3MoTFMuZ2V0RGF0YSgnZGV2LWRhc2gtcmVwb3MnKSk7IC8vIGNhY2hlICdyZXBvcycgdG8gbW9kdWxlIHNjb3BlIHZhclxuICAgICAgICAgICAgcG9wdWxhdGVNZW51KHJlcG9zKTsgIC8vIGJ1aWxkIHRoZSBsaXN0XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gZ2V0IHVzZXIncyBtb3N0IHJlY2VudGx5LWFjdGl2ZSByZXBvcyBmcm9tIEdpdEh1YlxuICAgICAgICAgICAgJC5nZXRKU09OKCdodHRwczovL2FwaS5naXRodWIuY29tL3VzZXJzLycgK1xuICAgICAgICAgICAgICAgICAgICAgIHVzZXJOYW1lICtcbiAgICAgICAgICAgICAgICAgICAgICAnL3JlcG9zP3NvcnQ9dXBkYXRlZCcpXG4gICAgICAgICAgICAgICAgLnRoZW4oIChyZXBvcykgPT4gcmVwb3Muc2xpY2UoMCwgMykgKSAvLyBtb3N0LXJlY2VudCAzIHJlcG9zXG4gICAgICAgICAgICAgICAgLnRoZW4ocG9wdWxhdGVSZXBvcykgIC8vIGNhY2hlIHJlcG9zIHRvIG1vZHVsZSBzY29wZSAncmVwb3MnYXJyYXlcbiAgICAgICAgICAgICAgICAudGhlbihzYXZlUmVwb3MpICAgICAgLy8gc2F2ZSB0aGVtIGluIGxvY2FsIHN0b3JhZ2VcbiAgICAgICAgICAgICAgICAudGhlbihwb3B1bGF0ZU1lbnUpOyAgLy8gYnVpbGQgdGhlIGxpc3RcbiAgICAgICAgfVxuICAgIH1cblxuICAgIFxuICAgIC8vIHB1YmxpYyBpbml0IG1ldGhvZFxuICAgIGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgIGNhY2hlRG9tKCk7XG4gICAgICAgIGJpbmRFdmVudHMoKTtcbiAgICAgICAgRE9NLiRsaXN0Q29udGFpbmVyLmFkZENsYXNzKCdoaWRkZW4nKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gZXhwb3J0IHB1YmxpYyBtZXRob2RzXG4gICAgcmV0dXJuIHtcbiAgICAgICAgaW5pdDogaW5pdCxcbiAgICAgICAgZ2V0UmVwb3M6IGdldFJlcG9zXG4gICAgfTtcblxufShqUXVlcnkpKTtcbiIsIi8qIGpzaGludCBlc3ZlcnNpb246NiAqL1xuLyogZ2xvYmFscyBqUXVlcnksIGNvbnNvbGUsIExTICovXG5cbnZhciBCYWNrZ3JvdW5kcyA9IChmdW5jdGlvbigkKSB7XG4gICAgXG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIFxuICAgIHZhciBET00gPSB7fSxcbiAgICAgICAgYmdBcnIgPSBbJzAwMScsICcwMDInLCAnMDAzJywgJzAwNCcsICcwMDUnLCAnMDA2JywgJzAwNycsICcwMDgnXSxcbiAgICAgICAgdG9kYXkgPSBtYWtlRGF0ZSgpLFxuICAgICAgICBzdGF0ZSA9IGxvYWRTdGF0ZSgpO1xuICAgIFxuICAgIFxuICAgIC8vIGNhY2hlIERPTSBlbGVtZW50c1xuICAgIGZ1bmN0aW9uIGNhY2hlRG9tKCkge1xuICAgICAgICBET00uJGJvZHkgPSAkKCdib2R5Jyk7XG4gICAgfVxuICAgIFxuICAgIFxuICAgIC8vIG1ha2UgYW5kIGZvcm1hdCBkYXRlIHN0cmluZ1xuICAgIGZ1bmN0aW9uIG1ha2VEYXRlKCkge1xuICAgICAgICByZXR1cm4gbmV3IERhdGUoKVxuICAgICAgICAgICAgLnRvRGF0ZVN0cmluZygpICAgLy8gY29udmVydCBvYmplY3QgdG8gYSBzdHJpbmdcbiAgICAgICAgICAgIC5zbGljZSg0LCAxNSk7ICAgIC8vIGp1c3Qgd2FudCAnTU0gREQgWVlZWSdcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gbG9hZCBzdGF0ZSBmcm9tIHN0b3JhZ2VcbiAgICBmdW5jdGlvbiBsb2FkU3RhdGUoKSB7XG4gICAgICAgIHZhciBzdG9yZWRTdGF0ZSA9IExTLmdldERhdGEoJ2Rldi1kYXNoLWJnJyksXG4gICAgICAgICAgICBpbWdJbmR4ICA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGJnQXJyLmxlbmd0aCksXG4gICAgICAgICAgICBuZXdTdGF0ZSA9IHtcbiAgICAgICAgICAgICAgICBpbWdOYW1lOiBiZ0FycltpbWdJbmR4XSxcbiAgICAgICAgICAgICAgICBkYXRlOiBtYWtlRGF0ZSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1N0b3JlZCBTdGF0ZTogJywgc3RvcmVkU3RhdGUpO1xuICAgICAgICBcbiAgICAgICAgcmV0dXJuIChzdG9yZWRTdGF0ZSkgPyBzdG9yZWRTdGF0ZSA6IG5ld1N0YXRlO1xuICAgIH1cbiAgICBcbiAgICAgICAgXG4gICAgLy8gc2V0IGJhY2tncm91bmQgaW1hZ2VcbiAgICAvLyBuZXcgaW1hZ2UgZWFjaCBuZXcgZGF5LiBTbyB3ZSAxc3QgY29tcGFyZSB0b2RheSB3aXRoXG4gICAgLy8gbG9jYWwgc3RvcmFnZSBkYXRlLCB1cGRhdGUgbG9jYWwgc3RvcmFnZSBpZiBkaWZmZXJlbnQsXG4gICAgLy8gYW5kIHRoZW4gc2V0IHRoZSBiYWNrZ3JvdW5kIGltYWdlIENTUyBvbiA8Ym9keT5cbiAgICBmdW5jdGlvbiBwaWNrQmFja2dyb3VuZCgpIHtcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ1RvZGF5OiAnLCB0b2RheSk7ICAvLyBmb3IgZGlhZ1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnU3RhdGU6ICcsIHN0YXRlKTsgIC8vIGZvciBkaWFnXG4gICAgICAgIFxuICAgICAgICB2YXIgY3VybnRJbWdJbmR4ID0gYmdBcnIuaW5kZXhPZihzdGF0ZS5pbWdOYW1lKSxcbiAgICAgICAgICAgIG5ld0ltZ0luZGV4LFxuICAgICAgICAgICAgbmV3SW1nTmFtZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChuZXcgRGF0ZSh0b2RheSkgPiBuZXcgRGF0ZShzdGF0ZS5kYXRlKSkge1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmaW5kIG5ldyBpbWFnZSBpbmRleFxuICAgICAgICAgICAgbmV3SW1nSW5kZXggPSAoY3VybnRJbWdJbmR4ID09PSA3KSA/IDAgOiBjdXJudEltZ0luZHggKyAxO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBmaW5kIG5ldyBpbWFnZSBzdHJpbmcgbmFtZVxuICAgICAgICAgICAgbmV3SW1nTmFtZSA9IGJnQXJyW25ld0ltZ0luZGV4XTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gc2F2ZSBuZXcgaW1hZ2UgbmFtZSAmIGRhdGUgdG8gbG9jYWwgc3RvcmFnZSBcbiAgICAgICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLWJnJywge1xuICAgICAgICAgICAgICAgIGltZ05hbWU6IG5ld0ltZ05hbWUsXG4gICAgICAgICAgICAgICAgZGF0ZTogdG9kYXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyB1cGRhdGUgdGhlIERPTVxuICAgICAgICAgICAgcmVuZGVyKG5ld0ltZ05hbWUpO1xuICAgICAgICAgICAgXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZW5kZXIoc3RhdGUuaW1nTmFtZSk7XG4gICAgICAgICAgICAvLyBzYXZlIGN1cnJlbnQgaW1hZ2UgbmFtZSAmIGRhdGUgdG8gbG9jYWwgc3RvcmFnZSBcbiAgICAgICAgICAgIExTLnNldERhdGEoJ2Rldi1kYXNoLWJnJywge1xuICAgICAgICAgICAgICAgIGltZ05hbWU6IHN0YXRlLmltZ05hbWUsXG4gICAgICAgICAgICAgICAgZGF0ZTogdG9kYXlcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIH1cbiAgICBcbiAgICBcbiAgICAvLyByZW5kZXIgdG8gRE9NXG4gICAgZnVuY3Rpb24gcmVuZGVyKGltYWdlTmFtZSkge1xuICAgICAgICBET00uJGJvZHlcbiAgICAgICAgICAgIC5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKGRpc3QvYXNzZXRzLycgKyBpbWFnZU5hbWUgKyAnLmpwZyknKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcHVibGljIGluaXQgbWV0aG9kXG4gICAgZnVuY3Rpb24gaW5pdCgpIHtcbiAgICAgICAgY2FjaGVEb20oKTtcbiAgICAgICAgcGlja0JhY2tncm91bmQoKTtcbiAgICB9XG4gICAgXG4gICAgXG4gICAgLy8gcmV0dXJuIHB1YmxpYyBhcGlcbiAgICByZXR1cm4ge1xuICAgICAgICBpbml0OiBpbml0XG4gICAgfTtcbiAgICBcbn0oalF1ZXJ5KSk7XG4iLCIvKiBqc2hpbnQgZXN2ZXJzaW9uOjYgKi9cbi8qIGdsb2JhbHMgJCwgZG9jdW1lbnQsIGNvbnNvbGUgKi9cblxuLyogYXBwLmpzIGNhbGwgZWFjaCBtb2R1bGUncyBwdWJsaWMgbWV0aG9kKHMpICAqL1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgXG4gICAgQmFja2dyb3VuZHMuaW5pdCgpO1xuICAgIFxuICAgIFJlcG9TZWxlY3QuaW5pdCgpO1xuICAgIFxuICAgIEdyZWV0LmluaXQoKTtcbiAgICBcbiAgICBIaXRBcGkuaW5pdCgpO1xuICAgIFxuICAgIFJlbmRlclRhYmxlLmluaXQoKTtcblxuICAgIFJlbmRlckNoYXJ0LmluaXQoKTtcblxufSk7XG4iXX0=
